"use strict";function formBuilderHelpersFn(a,b){var c={doCancel:!1},d=fbUtils;return b.events=formBuilderEventsFn(),c.makeClassName=function(a){return a=a.replace(/[^\w\s\-]/gi,""),d.hyphenCase(a)},c.mobileClass=function(){var a="";return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=" fb-mobile")}(navigator.userAgent||navigator.vendor||window.opera),a},c.startMoving=function(a,b){b.item.show().addClass("moving"),c.startIndex=$("li",this).index(b.item)},c.stopMoving=function(a,b){b.item.removeClass("moving"),c.doCancel&&($(b.sender).sortable("cancel"),$(this).sortable("cancel")),c.save(),c.doCancel=!1},c.beforeStop=function(b,d){var e=document.getElementById(a.formID),f=e.children.length-1,g=[];c.stopIndex=d.placeholder.index()-1,!a.sortableControls&&d.item.parent().hasClass("frmb-control")&&g.push(!0),a.prepend&&g.push(0===c.stopIndex),a.append&&g.push(c.stopIndex+1===f),c.doCancel=g.some(function(a){return a===!0})},c.safename=function(a){return a.replace(/\s/g,"-").replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()},c.forceNumber=function(a){return a.replace(/[^0-9]/g,"")},c.initTooltip=function(a){var b=a.find(".tooltip");a.mouseenter(function(){b.outerWidth()>200&&b.addClass("max-width"),b.css("left",a.width()+14),b.stop(!0,!0).fadeIn("fast")}).mouseleave(function(){a.find(".tooltip").stop(!0,!0).fadeOut("fast")}),b.hide()},c.getTypes=function(a){var b={type:a.attr("type")},c=$(".fld-subtype",a).val();return c!==b.type&&(b.subtype=c),b},c.fieldOptionData=function(a){var b=[];return $(".sortable-options li",a).each(function(){var a=$(this),c=$(".option-selected",a).is(":checked"),d={label:$(".option-label",a).val(),value:$(".option-value",a).val()};c&&(d.selected=c),b.push(d)}),b},c.xmlSave=function(a){var b=c.prepData(a),e=["<form-template>\n\t<fields>"];return d.forEach(b,function(a,b){var c=null;if(b.type.match(/(select|checkbox-group|radio-group)/)){for(var f=b.values,g=[],h=0;h<f.length;h++){var i=d.markup("option",f[h].label,f[h]).outerHTML;g.push("\n\t\t\t"+i)}g.push("\n\t\t"),c=g.join(""),delete b.values}var j=d.markup("field",c,b);e.push("\n\t\t"+j.outerHTML)}),e.push("\n\t</fields>\n</form-template>"),e.join("")},c.prepData=function(a){var b=[];return 0!==a.childNodes.length&&d.forEach(a.childNodes,function(a,e){var f=$(e);if(!f.hasClass("disabled")){var g,h;!function(){var a=c.getTypes(f),i=$(".roles-field:checked",e).map(function(){return this.value}).get();$('[class*="fld-"]',e).each(function(){var b=d.camelCase(this.name);a[b]="checkbox"===this.type?this.checked:this.value}),i.length&&(a.role=i.join(",")),a.className=a.className||a.class,g=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(a.className),g&&(a.style=g[1]),a=d.trimObj(a),a=d.escapeAttrs(a),h=a.type.match(/(select|checkbox-group|radio-group)/),h&&(a.values=c.fieldOptionData(f)),b.push(a)}()}}),b},c.jsonSave=function(a){return window.JSON.stringify(c.prepData(a),null,"\t")},c.getData=function(c){var e=c||a.formData;if(!e)return!1;var f={xml:function(b){return d.parseXML(b)},json:function(b){return window.JSON.parse(b)}};return b.formData=f[a.dataType](e)||[],b.formData},c.save=function(){var d=document.getElementById(a.formID),e={xml:c.xmlSave,json:c.jsonSave};return b.formData=e[a.dataType](d),document.dispatchEvent(b.events.formSaved),b.formData},c.incrementId=function(a){var b=a.lastIndexOf("-"),c=parseInt(a.substring(b+1))+1,d=a.substring(0,b);return d+"-"+c},c.updatePreview=function(b){var e=b.attr("class");if(e.indexOf("ui-sortable-handle")===-1){var i,f=$(b).attr("type"),g=$(".prev-holder",b),h={type:f};$('[class*="fld-"]',b).each(function(){var a=d.camelCase(this.name);h[a]="checkbox"===this.type?this.checked:this.value});var j=$(".btn-style",b).val();j&&(h.style=j),f.match(/(select|checkbox-group|radio-group)/)&&(h.values=[],h.multiple=$('[name="multiple"]',b).is(":checked"),$(".sortable-options li",b).each(function(){var a={};a.selected=$(".option-selected",this).is(":checked"),a.value=$(".option-value",this).val(),a.label=$(".option-label",this).val(),h.values.push(a)})),h=d.trimObj(h),h.className=c.classNames(b,h),$(".fld-className",b).val(h.className),b.data("fieldData",h),i=d.fieldRender(h,a,!0),g.html(i),$("input[toggle]",g).kcToggle()}},c.debounce=function(a){var d,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},c.disabledTT={className:"frmb-tt",add:function(e){var f=a.messages.fieldNonEditable;if(f){var g=d.markup("p",f,{className:c.disabledTT.className});e.append(g)}},remove:function(b){$(".frmb-tt",b).remove()}},c.classNames=function(a,b){var c=void 0,e=b.type,f=b.style,g=a[0].querySelector(".fld-className").value,h=g.split(" "),i={button:"btn",submit:"btn"},j=i[e];if(j){if(f){for(c=0;c<h.length;c++){var k=new RegExp("(?:^|s)"+j+"-(.*?)(?:s|$)+","g"),l=h[c].match(k);l&&h.splice(c,1)}h.push(j+"-"+f)}h.push(j)}return d.unique(h).join(" ").trim()},c.closeConfirm=function(a,c){a=a||document.getElementsByClassName("form-builder-overlay")[0],c=c||document.getElementsByClassName("form-builder-dialog")[0],a.classList.remove("visible"),c.remove(),a.remove(),document.dispatchEvent(b.events.modalClosed)},c.editorLayout=function(a){var b={left:{stage:"pull-right",controls:"pull-left"},right:{stage:"pull-left",controls:"pull-right"}};return b[a]?b[a]:""},c.showOverlay=function(){var a=d.markup("div",null,{className:"form-builder-overlay"});return document.body.appendChild(a),a.classList.add("visible"),a.onclick=function(){c.closeConfirm(a)},a},c.confirm=function(b,e){var f=arguments.length>2&&void 0!==arguments[2]&&arguments[2],g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",h=c.showOverlay(),i=d.markup("button",a.messages.yes,{className:"yes btn btn-success btn-sm"}),j=d.markup("button",a.messages.no,{className:"no btn btn-danger btn-sm"});j.onclick=function(){c.closeConfirm(h)},i.onclick=function(){e(),c.closeConfirm(h)};var k=d.markup("div",[j,i],{className:"button-wrap"});g="form-builder-dialog "+g;var l=d.markup("div",[b,k],{className:g});return f?l.classList.add("positioned"):(f={pageX:Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2,pageY:Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2},l.style.position="fixed"),l.style.left=f.pageX+"px",l.style.top=f.pageY+"px",document.body.appendChild(l),i.focus(),l},c.dialog=function(a){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";c.showOverlay(),f="form-builder-dialog "+f;var g=d.markup("div",a,{className:f});return e?g.classList.add("positioned"):(e={pageX:Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2,pageY:Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2},g.style.position="fixed"),g.style.left=e.pageX+"px",g.style.top=e.pageY+"px",document.body.appendChild(g),document.dispatchEvent(b.events.modalOpened),f.indexOf("data-dialog")!==-1&&document.dispatchEvent(b.events.viewData),g},c.removeAllfields=function(){var b=document.getElementById(a.formID),d=b.querySelectorAll("li.form-field"),e=$(d),f=[];if(!d.length)return!1;a.prepend&&f.push(!0),a.append&&f.push(!0),f.some(function(a){return a===!0})||(b.parentElement.classList.add("empty"),b.parentElement.dataset.content=a.messages.getStarted),b.classList.add("removing");var g=0;e.each(function(){g+=$(this).outerHeight()+3}),d[0].style.marginTop=-g+"px",setTimeout(function(){e.remove(),document.getElementById(a.formID).classList.remove("removing"),c.save()},400)},c.setFieldOrder=function(b){if(!a.sortableControls)return!1;var c={};b.children().each(function(a,b){c[a]=$(b).data("attrs").type}),window.sessionStorage&&window.sessionStorage.setItem("fieldOrder",window.JSON.stringify(c))},c.orderFields=function(b){var c=!1;if(window.sessionStorage&&(a.sortableControls?c=window.sessionStorage.getItem("fieldOrder"):window.sessionStorage.removeItem("fieldOrder")),c)c=window.JSON.parse(c),c=Object.keys(c).map(function(a){return c[a]});else{var e=a.controlOrder.concat(b.map(function(a){return a.attrs.type}));c=d.unique(e)}var f=[];return c.forEach(function(a){var c=b.filter(function(b){return b.attrs.type===a})[0];f.push(c)}),f.filter(Boolean)},c.closeAllEdit=function(a){var b=$("> li.editing",a),c=$(".toggle-form",a),d=$(".frm-holder",b);c.removeClass("open"),b.removeClass("editing"),d.hide(),$(".prev-holder",b).show()},c.toggleEdit=function(a){var b=document.getElementById(a),c=$(".toggle-form",b),d=$(".frm-holder",b);b.classList.toggle("editing"),c.toggleClass("open"),$(".prev-holder",b).slideToggle(250),d.slideToggle(250)},c.stickyControls=function(a,b){var c=$(b).parent(),d=a.parent(),e=c.width(),f=b.getBoundingClientRect();$(window).scroll(function(){var a=$(this).scrollTop();if(a>d.offset().top){var g={position:"fixed",width:e,top:0,bottom:"auto",right:"auto",left:f.left},h=c.offset(),i=d.offset(),j=h.top+c.height(),k=i.top+d.height();j>k&&h.top!==i.top&&c.css({position:"absolute",top:"auto",bottom:0,right:0,left:"auto"}),(j<k||j===k&&h.top>a)&&c.css(g)}else b.parentElement.removeAttribute("style")})},c.showData=function(){var e=d.escapeHtml(b.formData),f=d.markup("code",e,{className:"formData-"+a.dataType}),g=d.markup("pre",f);c.dialog(g,null,"data-dialog")},c.exportData=function(){var a=d.escapeHtml(b.formData);return a},c.removeField=function(d){var e=!1,f=document.getElementById(a.formID),g=f.getElementsByClassName("form-field");if(!g.length)return console.warn("No fields to remove"),!1;if(!d){var h=[].slice.call(g).map(function(a){return a.id});console.warn("fieldID required to use `removeField` action."),console.warn("Available IDs: "+h.join(", "))}var i=document.getElementById(d),j=$(i);return i?(j.slideUp(250,function(){if(j.removeClass("deleting"),j.remove(),e=!0,c.save(),!f.childNodes.length){var b=f.parentElement;b.classList.add("empty"),b.dataset.content=a.messages.getStarted}}),document.dispatchEvent(b.events.fieldRemoved),e):(console.warn("Field not found"),!1)},c}function formBuilderEventsFn(){var a={};return a.loaded=new Event("loaded"),a.viewData=new Event("viewData"),a.userDeclined=new Event("userDeclined"),a.modalClosed=new Event("modalClosed"),a.modalOpened=new Event("modalOpened"),a.formSaved=new Event("formSaved"),a.fieldAdded=new Event("fieldAdded"),a.fieldRemoved=new Event("fieldRemoved"),a}"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof Event&&!function(){window.Event=function(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!0),b}}(),"function"!=typeof Object.assign&&(Object.assign=function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");a=Object(a);for(var b=1;b<arguments.length;b++){var c=arguments[b];if(null!=c)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},fbUtils={};fbUtils.inArray=function(a,b){return b.indexOf(a)!==-1},fbUtils.trimObj=function(a){var b=[null,void 0,"",!1,"false"];for(var c in a)fbUtils.inArray(a[c],b)?delete a[c]:Array.isArray(a[c])&&(a[c].length||delete a[c]);return a},fbUtils.validAttr=function(a){var b=["values","enableOther","other","label","subtype"];return!fbUtils.inArray(a,b)},fbUtils.attrString=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&fbUtils.validAttr(c)&&(c=fbUtils.safeAttr(c,a[c]),b.push(c.name+c.value));return b.join(" ")},fbUtils.safeAttr=function(a,b){a=fbUtils.safeAttrName(a);var c=void 0;return b&&(Array.isArray(b)?c=fbUtils.escapeAttr(b.join(" ")):("boolean"==typeof b&&(b=b.toString()),c=fbUtils.escapeAttr(b.replace(","," ").trim()))),b=b?'="'+c+'"':"",{name:a,value:b}},fbUtils.safeAttrName=function(a){var b={className:"class"};return b[a]||fbUtils.hyphenCase(a)},fbUtils.hyphenCase=function(a){return a=a.replace(/[^\w\s\-]/gi,""),a=a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}),a.replace(/\s/g,"-").replace(/^-+/g,"")},fbUtils.camelCase=function(a){return a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()})},fbUtils.markup=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=void 0,e=document.createElement(a),f=function(b){return Array.isArray(b)?"array":"undefined"==typeof b?"undefined":_typeof(b)},g={string:function(b){e.innerHTML=b},object:function(b){return e.appendChild(b)},array:function(b){for(var c=0;c<b.length;c++)d=f(b[c]),g[d](b[c])}};for(var h in c)if(c.hasOwnProperty(h)){var i=fbUtils.safeAttrName(h);e.setAttribute(i,c[h])}return d=f(b),b&&g[d].call(this,b),e},fbUtils.parseAttrs=function(a){var b=a.attributes,c={};return fbUtils.forEach(b,function(a){var d=b[a].value;d.match(/false|true/g)?d="true"===d:d.match(/undefined/g)&&(d=void 0),d&&(c[b[a].name]=d)}),c},fbUtils.parseOptions=function(a){var b=a.getElementsByTagName("option"),c={},d=[];if(b.length)for(var e=0;e<b.length;e++)c=fbUtils.parseAttrs(b[e]),c.label=b[e].textContent,d.push(c);return d},fbUtils.parseXML=function(a){var b=new window.DOMParser,c=b.parseFromString(a,"text/xml"),d=[];if(c)for(var e=c.getElementsByTagName("field"),f=0;f<e.length;f++){var g=fbUtils.parseAttrs(e[f]);e[f].children.length&&(g.values=fbUtils.parseOptions(e[f])),d.push(g)}return d},fbUtils.escapeHtml=function(a){var b=document.createElement("textarea");return b.textContent=a,b.innerHTML},fbUtils.escapeAttr=function(a){function c(a){return b[a]||a}var b={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};return"string"==typeof a?a.replace(/["&<>]/g,c):a},fbUtils.escapeAttrs=function(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=fbUtils.escapeAttr(a[b]));return a},fbUtils.forEach=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])},fbUtils.unique=function(a){return a.filter(function(a,b,c){return c.indexOf(a)===b})},fbUtils.fieldRender=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d="",e="",f="",g=a.label||"",h=a.description||"",i="",j=a.values;a.name=c?a.name+"-preview":a.name,a.id=a.name,a.name=a.multiple?a.name+"[]":a.name,a.type=a.subtype||a.type,a.required&&(a.required=null,a["aria-required"]="true",i='<span class="required">*</span>'),"hidden"!==a.type&&(h&&(h='<span class="tooltip-element" tooltip="'+h+'">?</span>'),e='<label for="'+a.id+'" class="fb-'+a.type+'-label">'+g+" "+i+" "+h+"</label>");var k=a.label;delete a.label,delete a.description;var l=fbUtils.attrString(a);switch(a.type){case"textarea":case"rich-text":delete a.type;var m=a.value||"";d=e+"<textarea "+l+">"+m+"</textarea>";break;case"select":var n;if(a.type=a.type.replace("-group",""),j){a.placeholder&&(f+="<option disabled selected>"+a.placeholder+"</option>");for(var o=0;o<j.length;o++)j[o].selected&&!a.placeholder||delete j[o].selected,j[o].label||(j[o].label=""),n=fbUtils.attrString(j[o]),f+="<option "+n+">"+j[o].label+"</option>"}d=e+"<select "+l+">"+f+"</select>";break;case"checkbox-group":case"radio-group":var p=void 0;if(a.type=a.type.replace("-group",""),"checkbox"===a.type&&(a.name=a.name+"[]"),j){for(var q=void 0,r=0;r<j.length;r++)p=Object.assign({value:"",label:""},a,j[r]),p.selected&&(delete p.selected,p.checked=null),p.id=a.id+"-"+r,q=fbUtils.attrString(p),f+='<label for="'+p.id+'"><input '+q+" />"+p.label+'<div class="check"></div></label>';if(a.other){var s={id:a.id+"-other",className:a.className+" other-option",onclick:"fbUtils.otherOptionCB('"+a.id+"-other')"};q=fbUtils.attrString(Object.assign({},a,s)),f+="<input "+q+' /> <label for="'+s.id+'">'+b.messages.other+'</label> <input type="text" name="'+a.name+'" id="'+s.id+'-value" style="display:none;" />'}}d=e+'<div class="'+a.type+'-group">'+f+"</div>";break;case"text":var t="";a.unit&&(t='<span class="has-unit-span" style="float: left">'+a.unit+"</span>"),d=e+' <input style="float: left" '+l+">"+t;break;case"password":case"email":case"number":case"hidden":case"date":case"tel":case"autocomplete":d=e+" <input "+l+">";break;case"file":d=e+' <div class="uploader"><input '+l+'><span class="filename">選択ファイル無し</span><span class="btn-uploader btn">ファイル選択 </span></div>';break;case"color":d=e+" <input "+l+"> "+b.messages.selectColor;break;case"button":case"submit":d="<button "+l+">"+k+"</button>";break;case"checkbox":d="<input "+l+"> "+e,a.toggle&&setTimeout(function(){$(document.getElementById(a.id)).kcToggle()},100);break;default:d="<"+a.type+" "+l+">"+k+"</"+a.type+">"}if("hidden"!==a.type){var u=a.id?"fb-"+a.type+" form-group field-"+a.id:"";d=fbUtils.markup("div",d,{className:u})}else d=fbUtils.markup("input",null,a);return d},fbUtils.otherOptionCB=function(a){var b=document.getElementById(a),c=document.getElementById(a+"-value");b.checked?(b.style.display="none",c.style.display="inline-block"):(b.style.display="inline-block",c.style.display="none")},fbUtils.capitalize=function(a){return a.replace(/\b\w/g,function(a){return a.toUpperCase()})},function(a){var b=function(c,d){var e={theme:"fresh",messages:{off:"Off",on:"On"}},f=a.extend(e,d),g=a('<div class="kc-toggle"/>').insertAfter(c).append(c);g.toggleClass("on",c.is(":checked"));var h='<div class="kct-on">'+f.messages.on+"</div>",i='<div class="kct-off">'+f.messages.off+"</div>",j='<div class="kct-handle"></div>',k='<div class="kct-inner">'+h+j+i+"</div>";g.append(k),g.click(function(){c.attr("checked",!c.attr("checked")),a(this).toggleClass("on")})};a.fn.kcToggle=function(c){var d=this;return d.each(function(){var d=a(this);if(!d.data("kcToggle")){var e=new b(d,c);d.data("kcToggle",e)}})}}(jQuery),function(a){var b=function(c,d){function G(a,b){var c=[];for(var d in a)if(a.hasOwnProperty(d)){var e=h.messages[d],f=a[d].value;a[d].value=b[d]||a[d].value||"",a[d].label&&(h.messages[d]=a[d].label),a[d].options?c.push(I(d,a[d])):c.push(H(d,a[d])),h.messages[d]=e,a[d].value=f}return c.join("")}function H(a,b){var c={id:a+"-"+l,title:b.description||b.label||a.toUpperCase(),name:a,type:b.type||"text",className:["fld-"+a]},d='<label for="'+c.id+'">'+h.messages[a]+"</label>";g.inArray(c.type,["checkbox","checkbox-group","radio-group"])||c.className.push("form-control"),c=Object.assign({},b,c);var e="<input "+g.attrString(c)+">",f='<div class="input-wrap">'+e+"</div>";return'<div class="form-group '+a+'-wrap">'+d+f+"</div>"}function I(a,b){var c=Object.keys(b.options).map(function(a){var c={value:a};return a===b.value&&(c.selected=null),"<option "+g.attrString(c)+">"+b.options[a]+"</option>"}),d={id:a+"-"+l,title:b.description||b.label||a.toUpperCase(),name:a,className:"fld-"+a+" form-control"},e='<label for="'+d.id+'">'+h.messages[a]+"</label>";Object.keys(b).filter(function(a){return!g.inArray(a,["value","options","label"])}).forEach(function(a){d[a]=b[a]});var f="<select "+g.attrString(d)+">"+c.join("")+"</select>",i='<div class="input-wrap">'+f+"</div>";return'<div class="form-group '+a+'-wrap">'+e+i+"</div>"}var e=this,f={controlPosition:"right",controlOrder:["autocomplete","button","checkbox","checkbox-group","date","file","header","hidden","paragraph","number","radio-group","select","text","textarea"],dataType:"xml",disableFields:[],editOnAdd:!1,append:!1,prepend:!1,defaultFields:[],inputSets:[],fieldRemoveWarn:!1,roles:{1:"Administrator"},messages:{addOption:"Add Option +",allFieldsRemoved:"All fields were removed.",allowSelect:"Allow Select",allowMultipleFiles:"Allow users to upload multiple files",autocomplete:"Autocomplete",button:"Button",cannotBeEmpty:"This field cannot be empty",checkboxGroup:"Checkbox Group",checkbox:"Checkbox",checkboxes:"Checkboxes",className:"Class",clearAllMessage:"Are you sure you want to clear all fields?",clearAll:"Clear",close:"Close",content:"Content",copy:"Copy To Clipboard",copyButton:"&#43;",copyButtonTooltip:"Copy",dateField:"Date Field",description:"Help Text",descriptionField:"Description",devMode:"Developer Mode",editNames:"Edit Names",editorTitle:"Form Elements",editXML:"Edit XML",enableOther:"Enable &quot;Other&quot;",enableOtherMsg:"Let users to enter an unlisted option",fieldDeleteWarning:!1,fieldVars:"Field Variables",fieldNonEditable:"This field cannot be edited.",fieldRemoveWarning:"Are you sure you want to remove this field?",fileUpload:"File Upload",formUpdated:"Form Updated",getStarted:"Drag a field from the right to this area",header:"Header",hide:"Edit",hidden:"Hidden Input",label:"Label",labelEmpty:"Field Label cannot be empty",limitRole:"Limit access to one or more of the following roles:",mandatory:"Mandatory",maxlength:"Max Length",minOptionMessage:"This field requires a minimum of 2 options",multipleFiles:"Multiple Files",name:"Name",no:"No",number:"Number",off:"Off",on:"On",option:"Option",optional:"optional",optionLabelPlaceholder:"Label",optionValuePlaceholder:"Value",optionEmpty:"Option value required",other:"Other",paragraph:"Paragraph",placeholder:"Placeholder",placeholders:{value:"Value",label:"Label",text:"",textarea:"",email:"Enter you email",placeholder:"",className:"space separated classes",password:"Enter your password"},preview:"Preview",radioGroup:"Radio Group",radio:"Radio",removeMessage:"Remove Element",removeOption:"Remove Option",remove:"&#215;",required:"Required",richText:"Rich Text Editor",roles:"Access",save:"Save",selectOptions:"Options",select:"Select",selectColor:"Select Color",selectionsMessage:"Allow Multiple Selections",size:"Size",sizes:{xs:"Extra Small",sm:"Small",m:"Default",lg:"Large"},style:"Style",styles:{btn:{default:"Default",danger:"Danger",info:"Info",primary:"Primary",success:"Success",warning:"Warning"}},subtype:"Type",text:"Text Field",textArea:"Text Area",toggle:"Toggle",warning:"Warning!",value:"Value",viewJSON:"{  }",viewXML:"&lt;/&gt;",yes:"Yes"},notify:{error:function(b){return console.error(b)},success:function(b){return console.log(b)},warning:function(b){return console.warn(b)}},sortableControls:!1,stickyControls:!1,showActionButtons:!0,typeUserAttrs:{},typeUserEvents:{},prefix:"form-builder-"},g=fbUtils;f.messages.subtypes=function(){var a=function(b){return{label:b,value:b}};return{text:["text","password","email","color","tel"].map(a),header:["h1","h2","h3"].map(a),button:["button","submit","reset"].map(a),paragraph:["p","address","blockquote","canvas","output"].map(a)}}();var h=Object.assign({},f,c),i="frmb-"+a("ul[id^=frmb-]").length++;c.messages&&(h.messages=Object.assign({},f.messages,c.messages)),h.formID=i,e.element=d;var j=a("<ul/>").attr("id",i).addClass("frmb"),k=formBuilderHelpersFn(h,e);e.layout=k.editorLayout(h.controlPosition);var l=i+"-fld-1",m=i+"-control-box",n=[{label:h.messages.autocomplete,attrs:{type:"autocomplete",className:"autocomplete",name:"autocomplete"}},{label:h.messages.button,attrs:{type:"button",className:"button-input",name:"button"}},{label:h.messages.checkbox,attrs:{type:"checkbox",className:"checkbox",name:"checkbox"}},{label:h.messages.checkboxGroup,attrs:{type:"checkbox-group",className:"checkbox-group",name:"checkbox-group"}},{label:h.messages.dateField,attrs:{type:"date",className:"calendar",name:"date-input"}},{label:h.messages.fileUpload,attrs:{type:"file",className:"file-input",name:"file-input"}},{label:h.messages.header,attrs:{type:"header",className:"header"}},{label:h.messages.hidden,attrs:{type:"hidden",className:"hidden-input",name:"hidden-input"}},{label:h.messages.number,attrs:{type:"number",className:"number",name:"number"}},{label:h.messages.paragraph,attrs:{type:"paragraph",className:"paragraph"}},{label:h.messages.radioGroup,attrs:{type:"radio-group",className:"radio-group",name:"radio-group"}},{label:h.messages.select,attrs:{type:"select",className:"select",name:"select"}},{label:h.messages.text,attrs:{type:"text",className:"text-input",name:"text-input"}},{label:h.messages.textArea,attrs:{type:"textarea",className:"text-area",name:"textarea"}}];n=k.orderFields(n),h.disableFields&&(n=n.filter(function(a){return!g.inArray(a.attrs.type,h.disableFields)}));var o=g.markup("ul",null,{id:m,className:"frmb-control"});h.sortableControls&&o.classList.add("sort-enabled");var p=a(o);g.forEach(n,function(b){var c=a("<li/>",{class:"icon-"+n[b].attrs.className,type:n[b].type,name:n[b].className,label:n[b].label});c.data("newFieldData",n[b]);var d=g.markup("span",n[b].label);c.html(d).appendTo(p)}),h.inputSets.length&&(a("<li/>",{class:"fb-separator"}).html("<hr>").appendTo(p),h.inputSets.forEach(function(b){b.name=b.name||k.makeClassName(b.label);var c=a("<li/>",{class:"input-set-control",type:b.name});c.html(b.label).appendTo(p)})),j.sortable({cursor:"move",opacity:.9,revert:150,beforeStop:k.beforeStop,start:k.startMoving,stop:k.stopMoving,cancel:"input, select, .disabled, .form-group, .btn",placeholder:"frmb-placeholder"}),p.sortable({helper:"clone",opacity:.9,connectWith:j,cancel:".fb-separator",cursor:"move",scroll:!1,placeholder:"ui-state-highlight",start:k.startMoving,stop:k.stopMoving,revert:150,beforeStop:k.beforeStop,distance:3,update:function(b,c){return!k.doCancel&&void(c.item.parent()[0]===j[0]?(q(c.item),k.doCancel=!0):(k.setFieldOrder(p),k.doCancel=!h.sortableControls))}});var q=function(b){if(b[0].classList.contains("input-set-control")){var c=h.inputSets.filter(function(a){return a.name===b[0].type})[0];if(c.showHeader){var d={type:"header",subtype:"h2",id:c.name,label:c.label};B(d,!0)}c.fields.forEach(function(a){B(a,!0)})}else B(b,!0)},r=a("<div/>",{id:i+"-form-wrap",class:"form-wrap form-builder"+k.mobileClass()}),s=a("<div/>",{id:i+"-stage-wrap",class:"stage-wrap "+e.layout.stage}),t=a("<div/>",{id:i+"-cb-wrap",class:"cb-wrap "+e.layout.controls}).append(p[0]);if(h.showActionButtons){var u="xml"===h.dataType?h.messages.viewXML:h.messages.viewJSON,v=g.markup("button",u,{id:i+"-view-data",type:"button",className:"view-data btn btn-default"}),w=g.markup("button",h.messages.clearAll,{id:i+"-clear-all",type:"button",className:"clear-all btn btn-default"}),x=g.markup("button",h.messages.save,{className:"btn btn-primary "+h.prefix+"save",id:i+"-save",type:"button"}),y=g.markup("div",[w,v,x],{className:"form-actions btn-group"});t.append(y)}s.append(j,t),s.before(r),r.append(s,t),a(d).append(r);var z=k.debounce(function(b){if(b&&"keyup"===b.type&&"className"===this.name)return!1;var c=a(this).parents(".form-field:eq(0)");k.updatePreview(c),k.save()});j.on("change blur keyup",".form-elements input, .form-elements select, .form-elements textarea",z),a("li",p).click(function(){k.stopIndex=void 0,q(a(this)),k.save()});var A=function(){var c=[];if(h.prepend&&!a(".disabled.prepend",j).length){var d=g.markup("li",h.prepend,{className:"disabled prepend"});c.push(!0),j.prepend(d)}if(h.append&&!a(".disabled.append",j).length){var e=g.markup("li",h.append,{className:"disabled append"});c.push(!0),j.append(e)}c.some(function(a){return a===!0})&&s.removeClass("empty")},B=function(c){var d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f={};if(c instanceof jQuery){var h=c.data("newFieldData");if(h)f=h.attrs,f.label=h.label;else{var i=c[0].attributes;d||(f.values=c.children().map(function(b,c){return{label:a(c).text(),value:a(c).attr("value"),selected:Boolean(a(c).attr("selected"))}}));for(var j=i.length-1;j>=0;j--)f[i[j].name]=i[j].value}}else f=Object.assign({},c);f.name=d?D(f):f.name||D(f),d&&g.inArray(f.type,["text","number","file","select","textarea"])?f.className="form-control":f.className=f.class||f.className;var k=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(f.className);k&&(f.style=k[1]),g.escapeAttrs(f),P(f),d&&document.dispatchEvent(e.events.fieldAdded),s.removeClass("empty")},C=function(){var c=e.formData;if(c&&c.length){for(var d=0;d<c.length;d++)B(c[d]);s.removeClass("empty")}else h.defaultFields&&h.defaultFields.length?(h.defaultFields.forEach(function(a){return B(a)}),s.removeClass("empty")):h.prepend||h.append||s.addClass("empty").attr("data-content",h.messages.getStarted);k.save(),a("li.form-field:not(.disabled)",j).each(function(){k.updatePreview(a(this))}),A()};j.on("mousemove","li.disabled",function(b){a(".frmb-tt",this).css({left:b.offsetX-16,top:b.offsetY-34})}),j.on("mouseenter","li.disabled",function(){k.disabledTT.add(a(this))}),j.on("mouseleave","li.disabled",function(){k.disabledTT.remove(a(this))});var D=function(b){var c=(new Date).getTime();return b.type+"-"+c},E=function a(b){var c=[g.markup("a",h.messages.addOption,{className:"add add-opt"})],a=['<label class="false-label">'+h.messages.selectOptions+"</label>"],d=b.multiple||"checkbox-group"===b.type;return b.values&&b.values.length?b.values.forEach(function(a){return Object.assign({},{selected:!1},a)}):(b.values=[1,2,3].map(function(a){var b=h.messages.option+" "+a,c={selected:!1,label:b,value:g.hyphenCase(b)};return c}),b.values[0].selected=!0),a.push('<div class="sortable-options-wrap">'),a.push('<ol class="sortable-options">'),g.forEach(b.values,function(c){a.push(Q(b.name,b.values[c],d))}),a.push("</ol>"),a.push(g.markup("div",c,{className:"option-actions"}).outerHTML),a.push("</div>"),g.markup("div",a.join(""),{className:"form-group field-options"}).outerHTML},F=function a(b){var c,a=[],d=["select","checkbox-group","radio-group"],e=function(){return d.indexOf(b.type)!==-1}(),f=!g.inArray(b.type,["header","paragraph","file"].concat(d)),i=void 0!==b.role?b.role.split(","):[];if(a.push(O(b)),"checkbox"===b.type&&a.push(J("toggle",b,{first:h.messages.toggle})),a.push(N("label",b)),b.size=b.size||"m",b.style=b.style||"default",g.inArray(b.type,["header","paragraph","button"])||a.push(N("description",b)),h.messages.subtypes[b.type]){var j=h.messages.subtypes[b.type];a.push(M("subtype",b,j))}if("button"===b.type&&a.push(K(b.style,b.type)),"number"===b.type&&(a.push(L("min",b)),a.push(L("max",b)),a.push(L("step",b))),a.push(N("placeholder",b)),"textarea"===b.type&&a.push(L("rows",b)),a.push(N("className",b)),a.push(N("name",b)),f&&a.push(N("value",b)),"file"===b.type){var k={first:h.messages.multipleFiles,second:h.messages.allowMultipleFiles
};a.push(J("multiple",b,k))}var m=void 0!==b.role?'style="display:block"':"",n=['<div class="available-roles" '+m+">"];for(c in h.roles)if(h.roles.hasOwnProperty(c)){var o=g.inArray(c,i)?"checked":"",p="fld-"+l+"-roles-"+c;n.push('<input type="checkbox" name="roles[]" value="'+c+'" id="'+p+'" '+o+' class="roles-field" /> <label for="'+p+'">'+h.roles[c]+"</label><br/>")}n.push("</div>");var q={first:h.messages.roles,second:h.messages.limitRole,content:n.join("")};return a.push(J("access",b,q)),"checkbox-group"!==b.type&&"radio-group"!==b.type||a.push(J("other",b,{first:h.messages.enableOther,second:h.messages.enableOtherMsg})),"select"===b.type&&a.push(J("multiple",b,{first:" ",second:h.messages.selectionsMessage})),e&&a.push(E(b)),g.inArray(b.type,["text","textarea"])&&a.push(L("maxlength",b)),h.typeUserAttrs[b.type]&&a.push(G(h.typeUserAttrs[b.type],b)),a.join("")},J=function(b,c,d){if(!h.typeUserAttrs[c.type]||!h.typeUserAttrs[c.type][b]){var e=function(c){return'<label for="'+b+"-"+l+'">'+c+"</label>"},f=1==c[b]?"checked":"",g='<input type="checkbox" class="fld-'+b+'" name="'+b+'" value="true" '+f+' id="'+b+"-"+l+'"/> ',i=[],j=[g];return d.first&&i.unshift(e(d.first)),d.second&&j.push(e(d.second)),d.content&&j.push(d.content),j.unshift('<div class="input-wrap">'),j.push("</div>"),'<div class="form-group '+b+'-wrap">'+i.concat(j).join("")+"</div>"}},K=function(b,c){var d={button:"btn"},e=h.messages.styles[d[c]],f="";if(e){var g="<label>"+h.messages.style+"</label>";f+='<input value="'+b+'" name="style" type="hidden" class="btn-style">',f+='<div class="btn-group" role="group">',Object.keys(h.messages.styles[d[c]]).forEach(function(a){var e=b===a?"active":"";f+='<button value="'+a+'" type="'+c+'" class="'+e+" btn-xs "+d[c]+" "+d[c]+"-"+a+'">'+h.messages.styles[d[c]][a]+"</button>"}),f+="</div>",f='<div class="form-group style-wrap">'+g+" "+f+"</div>"}return f},L=function a(b,c){if(!h.typeUserAttrs[c.type]||!h.typeUserAttrs[c.type][b]){var d=c[b],e=h.messages[b]||b,f=h.messages.placeholders[b],i={type:"number",value:d,name:b,min:"0",placeholder:f,className:"fld-"+b+" form-control",id:b+"-"+l},a="<input "+g.attrString(g.trimObj(i))+">",j='<div class="input-wrap">'+a+"</div>";return'<div class="form-group '+b+'-wrap"><label for="'+i.id+'">'+e+"</label> "+j+"</div>"}},M=function(b,c,d){if(!h.typeUserAttrs[c.type]||!h.typeUserAttrs[c.type][b]){var e=d.map(function(a,d){var e=Object.assign({label:h.messages.option+" "+d,value:void 0},a);return a.value===c[b]&&(e.selected=!0),"<option "+g.attrString(g.trimObj(e))+">"+e.label+"</option>"}),f={id:b+"-"+l,name:b,className:"fld-"+b+" form-control"},i='<label for="'+f.id+'">'+(h.messages[b]||g.capitalize(b))+"</label>",j="<select "+g.attrString(f)+">"+e.join("")+"</select>",k='<div class="input-wrap">'+j+"</div>";return'<div class="form-group '+f.name+'-wrap">'+i+k+"</div>"}},N=function(b,c){if(!h.typeUserAttrs[c.type]||!h.typeUserAttrs[c.type][b]){var d=["text","textarea","select"],e=["header"],f=["paragraph"],i=c[b]||"",j=h.messages[b];"label"===b&&g.inArray(c.type,f)&&(j=h.messages.content),e=e.concat(h.messages.subtypes.header,f);var k=h.messages.placeholders,m=k[b]||"",n="",o=[];if("placeholder"!==b||g.inArray(c.type,d)||o.push(!0),"name"===b&&g.inArray(c.type,e)&&o.push(!0),!o.some(function(a){return a===!0})){var p={name:b,placeholder:m,className:"fld-"+b+" form-control",id:b+"-"+l},q='<label for="'+p.id+'">'+j+"</label>";"label"===b&&g.inArray(c.type,f)||"value"===b&&"textarea"===c.type?n+="<textarea "+g.attrString(p)+">"+i+"</textarea>":(p.value=i,p.type="text",n+="<input "+g.attrString(p)+">");var r='<div class="input-wrap">'+n+"</div>";n='<div class="form-group '+b+'-wrap">'+q+" "+r+"</div>"}return n}},O=function(b){var c=["header","paragraph","button"],d=[],e="";return g.inArray(b.type,c)&&d.push(!0),d.some(function(a){return a===!0})||(e=J("required",b,{first:h.messages.required})),e},P=function(c){var d=c.type||"text",e=c.label||h.messages[d]||h.messages.label,f=g.markup("a",null,{id:"del_"+l,className:"del-button btn delete-confirm fa fa-trash",title:h.messages.removeMessage}),i=g.markup("a",null,{id:l+"-edit",className:"toggle-form btn icon-pencil",title:h.messages.hide}),m=g.markup("a",h.messages.copyButton,{id:l+"-copy",className:"copy-button btn",title:h.messages.copyButtonTooltip}),n=g.markup("div",[i,m,f],{className:"field-actions"}).outerHTML;n+='<label class="field-label">'+e,c.description&&(n+='<span class="tooltip-element" tooltip="'+c.description+'">?</span>');var o=c.required?'style="display:inline"':"";n+='<span class="required-asterisk" '+o+"> *</span>",n+="</label>",n+=g.markup("div","",{className:"prev-holder"}).outerHTML,n+='<div id="'+l+'-holder" class="frm-holder">',n+='<div class="form-elements">',n+=F(c),n+=g.markup("a",h.messages.close,{className:"close-field"}).outerHTML,n+="</div>",n+="</div>";var p=g.markup("li",n,{class:d+"-field form-field clearfix",type:d,id:l}),q=a(p);q.data("fieldData",{attrs:c}),"undefined"!=typeof k.stopIndex?a("> li",j).eq(k.stopIndex).before(q):j.append(q),a(".sortable-options",q).sortable({update:function(){k.updatePreview(q)}}),k.updatePreview(q),h.editOnAdd&&(k.closeAllEdit(j),k.toggleEdit(l)),h.typeUserEvents[d]&&h.typeUserEvents[d].onadd&&h.typeUserEvents[d].onadd(p),l=k.incrementId(l)},Q=function(b,c,d){var e={selected:d?"checkbox":"radio"},f=["value","label","selected"],i=[];c=Object.assign({selected:!1,label:"",value:""},c);for(var j=f.length-1;j>=0;j--){var k=f[j];if(c.hasOwnProperty(k)){var l={type:e[k]||"text",class:"option-"+k,value:c[k],name:b+"-option"};h.messages.placeholders[k]&&(l.placeholder=h.messages.placeholders[k]),"selected"===k&&c.selected===!0&&(l.checked=c.selected),i.push(g.markup("input",null,l))}}var m={className:"remove btn",title:h.messages.removeMessage};i.push(g.markup("a",h.messages.remove,m));var n=g.markup("li",i);return n.outerHTML},R=function(c){var d=c.attr("id"),e=c.attr("type"),f=(new Date).getTime(),g=e+"-"+f,i=c.clone();return i.find("[id]").each(function(){this.id=this.id.replace(d,l)}),i.find("[for]").each(function(){this.setAttribute("for",this.getAttribute("for").replace(d,l))}),i.each(function(){a("e:not(.form-elements)").each(function(){var a=this.getAttribute("name");a=a.substring(0,a.lastIndexOf("-")+1),a+=f.toString(),this.setAttribute("name",a)})}),i.find(".form-elements").find(":input").each(function(){if("name"===this.getAttribute("name")){var a=this.getAttribute("value");a=a.substring(0,a.lastIndexOf("-")+1),a+=f.toString(),this.setAttribute("value",a)}}),i.attr("id",l),i.attr("name",g),i.addClass("cloned"),a(".sortable-options",i).sortable(),h.typeUserEvents[e]&&h.typeUserEvents[e].onclone&&h.typeUserEvents[e].onclone(i[0]),l=k.incrementId(l),i};if(j.on("click touchstart",".remove",function(b){var c=a(this).parents(".form-field:eq(0)");b.preventDefault();var d=a(this).parents(".sortable-options:eq(0)").children("li").length;d<=2?h.notify.error("Error: "+h.messages.minOptionMessage):a(this).parent("li").slideUp("250",function(){a(this).remove(),k.updatePreview(c),k.save()})}),j.on("touchstart","input",function(b){if(b.handled===!0)return!1;if("checkbox"===a(this).attr("type"))a(this).trigger("click");else{a(this).focus();var c=a(this).val();a(this).val(c)}}),j.on("click touchstart",".toggle-form, .close-field",function(b){if(b.stopPropagation(),b.preventDefault(),b.handled===!0)return!1;var c=a(this).parents(".form-field:eq(0)").attr("id");k.toggleEdit(c),b.handled=!0}),j.on("change",".prev-holder input, .prev-holder select",function(b){if(!b.target.classList.contains("other-option")){var c=a(b.target).closest("li.form-field")[0];g.inArray(c.type,["select","checkbox-group","radio-group"])?c.querySelector('[class="option-value"][value="'+b.target.value+'"]').parentElement.childNodes[0].checked=!0:document.getElementById("value-"+c.id).value=b.target.value,k.save()}}),j.on("keyup change",'[name="label"]',function(){a(".field-label",a(this).closest("li")).text(a(this).val())}),j.delegate("input.error","keyup",function(){a(this).removeClass("error")}),j.on("keyup",'input[name="description"]',function(){var b=a(this).parents(".form-field:eq(0)"),c=a(".tooltip-element",b),d=a(this).val();if(""!==d)if(c.length)c.attr("tooltip",d).css("display","inline-block");else{var e='<span class="tooltip-element" tooltip="'+d+'">?</span>';a(".field-label",b).after(e)}else c.length&&c.css("display","none")}),j.on("change",".fld-multiple",function(b){var c=b.target.checked?"checkbox":"radio";a(b.target).parents(".form-elements:eq(0)").find(".sortable-options input.option-selected").each(function(){this.type=c})}),j.on("blur","input.fld-name",function(){this.value=k.safename(this.value),""===this.value?a(this).addClass("field-error").attr("placeholder",h.messages.cannotBeEmpty):a(this).removeClass("field-error")}),j.on("blur","input.fld-maxlength",function(){this.value=k.forceNumber(this.value)}),j.on("click touchstart",".icon-copy",function(b){b.preventDefault();var c=a(this).parent().parent("li"),d=R(c);d.insertAfter(c),k.updatePreview(d),k.save()}),j.on("click touchstart",".delete-confirm",function(b){b.preventDefault();var c=this.getBoundingClientRect(),d=document.body.getBoundingClientRect(),e={pageX:c.left+c.width/2,pageY:c.top-d.top-12},f=a(this).parents(".form-field:eq(0)").attr("id"),i=a(document.getElementById(f));if(document.addEventListener("modalClosed",function(){i.removeClass("deleting")},!1),h.fieldRemoveWarn){var j=g.markup("h3",h.messages.warning),l=g.markup("p",h.messages.fieldRemoveWarning);k.confirm([j,l],function(){return k.removeField(f)},e),i.addClass("deleting")}else k.removeField(f)}),j.on("click",".style-wrap button",function(){var b=a(this).val(),c=a(this).parent(),d=c.prev(".btn-style");d.val(b),a(this).siblings(".btn").removeClass("active"),a(this).addClass("active"),z.call(c)}),j.on("click","input.fld-required",function(){var b=a(this).parents("li.form-field").find(".required-asterisk");b.toggle()}),j.on("click","input.fld-access",function(){var b=a(this).parents("li.form-field").find("div.available-roles"),c=a(this);b.slideToggle(250,function(){c.is(":checked")||a('input[type="checkbox"]',b).removeAttr("checked")})}),j.on("click",".add-opt",function(b){b.preventDefault();var c=a(this).parents(".field-options:eq(0)"),d=a('[name="multiple"]',c),e=a(".option-selected:eq(0)",c),f=!1;f=d.length?d.prop("checked"):"checkbox"===e.attr("type");var g=e.attr("name");a(".sortable-options",c).append(Q(g,!1,f))}),j.on("mouseover mouseout",".remove, .del-button",function(){a(this).parents("li:eq(0)").toggleClass("delete")}),h.showActionButtons){var S=a(document.getElementById(i+"-view-data"));S.click(function(a){a.preventDefault(),k.showData()});var T=a(document.getElementById(i+"-clear-all"));T.click(function(){var b=a("li.form-field"),c=this.getBoundingClientRect(),d=document.body.getBoundingClientRect(),e={pageX:c.left+c.width/2,pageY:c.top-d.top-12};b.length?k.confirm(h.messages.clearAllMessage,function(){k.removeAllfields(),h.notify.success(h.messages.allFieldsRemoved),k.save()},e):k.dialog("There are no fields to clear",{pageX:e.pageX,pageY:e.pageY})}),a(document.getElementById(i+"-save")).click(function(a){a.preventDefault(),k.save()})}return k.getData(),C(),j.css("min-height",p.height()),h.stickyControls&&k.stickyControls(j,o),document.dispatchEvent(e.events.loaded),e.actions={clearFields:k.removeAllfields,showData:k.showData,exportData:k.exportData,save:k.save,addField:function(b,c){k.stopIndex=j[0].children.length?c:void 0,B(b),document.dispatchEvent(e.events.fieldAdded)},removeField:k.removeField,setData:function(b){k.removeAllfields(),k.getData(b),C()}},e};a.fn.formBuilder=function(c){return c=c||{},this.each(function(){var d=new b(c,this);return a(this).data("formBuilder",d),d})}}(jQuery);