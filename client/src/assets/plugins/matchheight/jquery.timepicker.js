!function(a){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function e(a){var b=a[0];return b.offsetWidth>0&&b.offsetHeight>0}function f(b){if(b.minTime&&(b.minTime=w(b.minTime)),b.maxTime&&(b.maxTime=w(b.maxTime)),b.durationTime&&"function"!=typeof b.durationTime&&(b.durationTime=w(b.durationTime)),"now"==b.scrollDefault)b.scrollDefault=function(){return b.roundingFunction(w(new Date),b)};else if(b.scrollDefault&&"function"!=typeof b.scrollDefault){var c=b.scrollDefault;b.scrollDefault=function(){return b.roundingFunction(w(c),b)}}else b.minTime&&(b.scrollDefault=function(){return b.roundingFunction(b.minTime,b)});if("string"===a.type(b.timeFormat)&&b.timeFormat.match(/[gh]/)&&(b._twelveHourTime=!0),b.showOnFocus===!1&&b.showOn.indexOf("focus")!=-1&&b.showOn.splice(b.showOn.indexOf("focus"),1),b.disableTimeRanges.length>0){for(var d in b.disableTimeRanges)b.disableTimeRanges[d]=[w(b.disableTimeRanges[d][0]),w(b.disableTimeRanges[d][1])];b.disableTimeRanges=b.disableTimeRanges.sort(function(a,b){return a[0]-b[0]});for(var d=b.disableTimeRanges.length-1;d>0;d--)b.disableTimeRanges[d][0]<=b.disableTimeRanges[d-1][1]&&(b.disableTimeRanges[d-1]=[Math.min(b.disableTimeRanges[d][0],b.disableTimeRanges[d-1][0]),Math.max(b.disableTimeRanges[d][1],b.disableTimeRanges[d-1][1])],b.disableTimeRanges.splice(d,1))}return b}function g(c){var e=c.data("timepicker-settings"),f=c.data("timepicker-list");if(f&&f.length&&(f.remove(),c.data("timepicker-list",!1)),e.useSelect){f=a("<select />",{class:"ui-timepicker-select"});var g=f}else{f=a("<ul />",{class:"ui-timepicker-list"});var g=a("<div />",{class:"ui-timepicker-wrapper",tabindex:-1});g.css({display:"none",position:"absolute"}).append(f)}if(e.noneOption)if(e.noneOption===!0&&(e.noneOption=e.useSelect?"Time...":"None"),a.isArray(e.noneOption)){for(var j in e.noneOption)if(parseInt(j,10)==j){var l=h(e.noneOption[j],e.useSelect);f.append(l)}}else{var l=h(e.noneOption,e.useSelect);f.append(l)}if(e.className&&g.addClass(e.className),(null!==e.minTime||null!==e.durationTime)&&e.showDuration){"function"==typeof e.step?"function":e.step;g.addClass("ui-timepicker-with-duration"),g.addClass("ui-timepicker-step-"+e.step)}var o=e.minTime;"function"==typeof e.durationTime?o=w(e.durationTime()):null!==e.durationTime&&(o=e.durationTime);var q=null!==e.minTime?e.minTime:0,r=null!==e.maxTime?e.maxTime:q+b-1;r<q&&(r+=b),r===b-1&&"string"===a.type(e.timeFormat)&&e.show2400&&(r=b);var s=e.disableTimeRanges,x=0,y=s.length,z=e.step;"function"!=typeof z&&(z=function(){return e.step});for(var j=q,A=0;j<=r;A++,j+=60*z(A)){var B=j,C=v(B,e);if(e.useSelect){var D=a("<option />",{value:C});D.text(C)}else{var D=a("<li />");D.addClass(B%86400<43200?"ui-timepicker-am":"ui-timepicker-pm"),D.data("time",B<=86400?B:B%86400),D.text(C)}if((null!==e.minTime||null!==e.durationTime)&&e.showDuration){var E=u(j-o,e.step);if(e.useSelect)D.text(D.text()+" ("+E+")");else{var F=a("<span />",{class:"ui-timepicker-duration"});F.text(" ("+E+")"),D.append(F)}}x<y&&(B>=s[x][1]&&(x+=1),s[x]&&B>=s[x][0]&&B<s[x][1]&&(e.useSelect?D.prop("disabled",!0):D.addClass("ui-timepicker-disabled"))),f.append(D)}if(g.data("timepicker-input",c),c.data("timepicker-list",g),e.useSelect)c.val()&&f.val(i(w(c.val()),e)),f.on("focus",function(){a(this).data("timepicker-input").trigger("showTimepicker")}),f.on("blur",function(){a(this).data("timepicker-input").trigger("hideTimepicker")}),f.on("change",function(){p(c,a(this).val(),"select")}),p(c,f.val(),"initial"),c.hide().after(f);else{var G=e.appendTo;"string"==typeof G?G=a(G):"function"==typeof G&&(G=G(c)),G.append(g),m(c,f),f.on("mousedown click","li",function(b){c.off("focus.timepicker"),c.on("focus.timepicker-ie-hack",function(){c.off("focus.timepicker-ie-hack"),c.on("focus.timepicker",d.show)}),k(c)||c[0].focus(),f.find("li").removeClass("ui-timepicker-selected"),a(this).addClass("ui-timepicker-selected"),t(c)&&(c.trigger("hideTimepicker"),f.on("mouseup.timepicker click.timepicker","li",function(a){f.off("mouseup.timepicker click.timepicker"),g.hide()}))})}}function h(b,c){var d,e,f;return"object"==typeof b?(d=b.label,e=b.className,f=b.value):"string"==typeof b?d=b:a.error("Invalid noneOption value"),c?a("<option />",{value:f,class:e,text:d}):a("<li />",{class:e,text:d}).data("time",String(f))}function i(a,b){if(a=b.roundingFunction(a,b),null!==a)return v(a,b)}function j(b){if(b.target!=window){var c=a(b.target);c.closest(".ui-timepicker-input").length||c.closest(".ui-timepicker-wrapper").length||(d.hide(),a(document).unbind(".ui-timepicker"),a(window).unbind(".ui-timepicker"))}}function k(a){var b=a.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&b.disableTouchKeyboard}function l(b,c,d){if(!d&&0!==d)return!1;var e=b.data("timepicker-settings"),f=!1,d=e.roundingFunction(d,e);return c.find("li").each(function(b,c){var e=a(c);if("number"==typeof e.data("time"))return e.data("time")==d?(f=e,!1):void 0}),f}function m(a,b){b.find("li").removeClass("ui-timepicker-selected");var c=w(o(a),a.data("timepicker-settings"));if(null!==c){var d=l(a,b,c);if(d){var e=d.offset().top-b.offset().top;(e+d.outerHeight()>b.outerHeight()||e<0)&&b.scrollTop(b.scrollTop()+d.position().top-d.outerHeight()),d.addClass("ui-timepicker-selected")}}}function n(b,c){if(""!==this.value&&"timepicker"!=c){var d=a(this);if(!d.is(":focus")||b&&"change"==b.type){var e=d.data("timepicker-settings"),f=w(this.value,e);if(null===f)return void d.trigger("timeFormatError");var g=!1;null!==e.minTime&&f<e.minTime&&null!==e.maxTime&&f>e.maxTime&&(g=!0),a.each(e.disableTimeRanges,function(){if(f>=this[0]&&f<this[1])return g=!0,!1}),e.forceRoundTime&&(f=e.roundingFunction(f,e));var h=v(f,e);g?p(d,h,"error")&&d.trigger("timeRangeError"):p(d,h)}}}function o(a){return a.is("input")?a.val():a.data("ui-timepicker-value")}function p(a,b,c){if(a.is("input")){a.val(b);var d=a.data("timepicker-settings");d.useSelect&&"select"!=c&&"initial"!=c&&a.data("timepicker-list").val(i(w(b),d))}return a.data("ui-timepicker-value")!=b?(a.data("ui-timepicker-value",b),"select"==c?a.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=c&&a.trigger("changeTime"),!0):(a.trigger("selectTime"),!1)}function q(a){switch(a.keyCode){case 13:case 9:return;default:a.preventDefault()}}function r(b){var c=a(this),f=c.data("timepicker-list");if(!f||!e(f)){if(40!=b.keyCode)return!0;d.show.call(c.get(0)),f=c.data("timepicker-list"),k(c)||c.focus()}switch(b.keyCode){case 13:return t(c)&&d.hide.apply(this),b.preventDefault(),!1;case 38:var g=f.find(".ui-timepicker-selected");return g.length?g.is(":first-child")||(g.removeClass("ui-timepicker-selected"),g.prev().addClass("ui-timepicker-selected"),g.prev().position().top<g.outerHeight()&&f.scrollTop(f.scrollTop()-g.outerHeight())):(f.find("li").each(function(b,c){if(a(c).position().top>0)return g=a(c),!1}),g.addClass("ui-timepicker-selected")),!1;case 40:return g=f.find(".ui-timepicker-selected"),0===g.length?(f.find("li").each(function(b,c){if(a(c).position().top>0)return g=a(c),!1}),g.addClass("ui-timepicker-selected")):g.is(":last-child")||(g.removeClass("ui-timepicker-selected"),g.next().addClass("ui-timepicker-selected"),g.next().position().top+2*g.outerHeight()>f.outerHeight()&&f.scrollTop(f.scrollTop()+g.outerHeight())),!1;case 27:f.find("li").removeClass("ui-timepicker-selected"),d.hide();break;case 9:d.hide();break;default:return!0}}function s(b){var c=a(this),d=c.data("timepicker-list"),f=c.data("timepicker-settings");if(!d||!e(d)||f.disableTextInput)return!0;switch(b.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:f.typeaheadHighlight?m(c,d):d.hide()}}function t(a){var b=a.data("timepicker-settings"),c=a.data("timepicker-list"),d=null,e=c.find(".ui-timepicker-selected");return!e.hasClass("ui-timepicker-disabled")&&(e.length&&(d=e.data("time")),null!==d&&("string"!=typeof d&&(d=v(d,b)),p(a,d,"select")),!0)}function u(a,b){a=Math.abs(a);var f,g,d=Math.round(a/60),e=[];return d<60?e=[d,c.mins]:(f=Math.floor(d/60),g=d%60,30==b&&30==g&&(f+=c.decimal+5),e.push(f),e.push(1==f?c.hr:c.hrs),30!=b&&g&&(e.push(g),e.push(c.mins))),e.join(" ")}function v(d,e){if("number"!=typeof d)return null;var f=parseInt(d%60),g=parseInt(d/60%60),h=parseInt(d/3600%24),i=new Date(1970,0,2,h,g,f,0);if(isNaN(i.getTime()))return null;if("function"===a.type(e.timeFormat))return e.timeFormat(i);for(var k,l,j="",m=0;m<e.timeFormat.length;m++)switch(l=e.timeFormat.charAt(m)){case"a":j+=i.getHours()>11?c.pm:c.am;break;case"A":j+=i.getHours()>11?c.PM:c.AM;break;case"g":k=i.getHours()%12,j+=0===k?"12":k;break;case"G":k=i.getHours(),d===b&&(k=e.show2400?24:0),j+=k;break;case"h":k=i.getHours()%12,0!==k&&k<10&&(k="0"+k),j+=0===k?"12":k;break;case"H":k=i.getHours(),d===b&&(k=e.show2400?24:0),j+=k>9?k:"0"+k;break;case"i":var g=i.getMinutes();j+=g>9?g:"0"+g;break;case"s":f=i.getSeconds(),j+=f>9?f:"0"+f;break;case"\\":m++,j+=e.timeFormat.charAt(m);break;default:j+=l}return j}function w(a,d){if(""===a||null===a)return null;if("object"==typeof a)return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds();if("string"!=typeof a)return a;a=a.toLowerCase().replace(/[\s\.]/g,""),"a"!=a.slice(-1)&&"p"!=a.slice(-1)||(a+="m");var e="("+c.am.replace(".","")+"|"+c.pm.replace(".","")+"|"+c.AM.replace(".","")+"|"+c.PM.replace(".","")+")?",f=new RegExp("^"+e+"([0-9]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?"+e+"$"),g=a.match(f);if(!g)return null;var h=parseInt(1*g[2],10);if(h>24){if(d&&d.wrapHours===!1)return null;h%=24}var i=g[1]||g[5],j=h;if(h<=12&&i){var k=i==c.pm||i==c.PM;j=12==h?k?12:0:h+(k?12:0)}var l=1*g[3]||0,m=1*g[4]||0,n=3600*j+60*l+m;if(h<12&&!i&&d&&d._twelveHourTime&&d.scrollDefault){var o=n-d.scrollDefault();o<0&&o>=b/-2&&(n=(n+b/2)%b)}return n}var b=86400,c={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},d={init:function(b){return this.each(function(){var e=a(this),h=[];for(var i in a.fn.timepicker.defaults)e.data(i)&&(h[i]=e.data(i));var j=a.extend({},a.fn.timepicker.defaults,h,b);if(j.lang&&(c=a.extend(c,j.lang)),j=f(j),e.data("timepicker-settings",j),e.addClass("ui-timepicker-input"),j.useSelect)g(e);else{if(e.prop("autocomplete","off"),j.showOn)for(var k in j.showOn)e.on(j.showOn[k]+".timepicker",d.show);e.on("change.timepicker",n),e.on("keydown.timepicker",r),e.on("keyup.timepicker",s),j.disableTextInput&&e.on("keydown.timepicker",q),n.call(e.get(0))}})},show:function(b){var c=a(this),f=c.data("timepicker-settings");if(b&&b.preventDefault(),f.useSelect)return void c.data("timepicker-list").focus();k(c)&&c.blur();var h=c.data("timepicker-list");if(!c.prop("readonly")&&(h&&0!==h.length&&"function"!=typeof f.durationTime||(g(c),h=c.data("timepicker-list")),!e(h))){c.data("ui-timepicker-value",c.val()),m(c,h),d.hide(),h.show();var i={};f.orientation.match(/r/)?i.left=c.offset().left+c.outerWidth()-h.outerWidth()+parseInt(h.css("marginLeft").replace("px",""),10):i.left=c.offset().left+parseInt(h.css("marginLeft").replace("px",""),10);var n;n=f.orientation.match(/t/)?"t":f.orientation.match(/b/)?"b":c.offset().top+c.outerHeight(!0)+h.outerHeight()>a(window).height()+a(window).scrollTop()?"t":"b","t"==n?(h.addClass("ui-timepicker-positioned-top"),i.top=c.offset().top-h.outerHeight()+parseInt(h.css("marginTop").replace("px",""),10)):(h.removeClass("ui-timepicker-positioned-top"),i.top=c.offset().top+c.outerHeight()+parseInt(h.css("marginTop").replace("px",""),10)),h.offset(i);var p=h.find(".ui-timepicker-selected");if(!p.length){var q=w(o(c));null!==q?p=l(c,h,q):f.scrollDefault&&(p=l(c,h,f.scrollDefault()))}if(p&&p.length){var r=h.scrollTop()+p.position().top-p.outerHeight();h.scrollTop(r)}else h.scrollTop(0);return f.stopScrollPropagation&&a(document).on("wheel.ui-timepicker",".ui-timepicker-wrapper",function(b){b.preventDefault();var c=a(this).scrollTop();a(this).scrollTop(c+b.originalEvent.deltaY)}),a(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",j),a(window).on("resize.ui-timepicker",j),f.closeOnWindowScroll&&a(document).on("scroll.ui-timepicker",j),c.trigger("showTimepicker"),this}},hide:function(b){var c=a(this),d=c.data("timepicker-settings");return d&&d.useSelect&&c.blur(),a(".ui-timepicker-wrapper").each(function(){var b=a(this);if(e(b)){var c=b.data("timepicker-input"),d=c.data("timepicker-settings");d&&d.selectOnBlur&&t(c),b.hide(),c.trigger("hideTimepicker")}}),this},option:function(b,c){return"string"==typeof b&&"undefined"==typeof c?a(this).data("timepicker-settings")[b]:this.each(function(){var d=a(this),e=d.data("timepicker-settings"),h=d.data("timepicker-list");"object"==typeof b?e=a.extend(e,b):"string"==typeof b&&(e[b]=c),e=f(e),d.data("timepicker-settings",e),h&&(h.remove(),d.data("timepicker-list",!1)),e.useSelect&&g(d)})},getSecondsFromMidnight:function(){return w(o(this))},getTime:function(a){var b=this,c=o(b);if(!c)return null;var d=w(c);if(null===d)return null;a||(a=new Date);var e=new Date(a);return e.setHours(d/3600),e.setMinutes(d%3600/60),e.setSeconds(d%60),e.setMilliseconds(0),e},isVisible:function(){var a=this,b=a.data("timepicker-list");return!(!b||!e(b))},setTime:function(a){var b=this,c=b.data("timepicker-settings");if(c.forceRoundTime)var d=i(w(a),c);else var d=v(w(a),c);return a&&null===d&&c.noneOption&&(d=a),p(b,d),b.data("timepicker-list")&&m(b,b.data("timepicker-list")),this},remove:function(){var a=this;if(a.hasClass("ui-timepicker-input")){var b=a.data("timepicker-settings");return a.removeAttr("autocomplete","off"),a.removeClass("ui-timepicker-input"),a.removeData("timepicker-settings"),a.off(".timepicker"),a.data("timepicker-list")&&a.data("timepicker-list").remove(),b.useSelect&&a.show(),a.removeData("timepicker-list"),this}}};a.fn.timepicker=function(b){return this.length?d[b]?this.hasClass("ui-timepicker-input")?d[b].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.timepicker"):d.init.apply(this,arguments):this},a.fn.timepicker.defaults={appendTo:"body",className:null,closeOnWindowScroll:!1,disableTextInput:!1,disableTimeRanges:[],disableTouchKeyboard:!1,durationTime:null,forceRoundTime:!1,maxTime:null,minTime:null,noneOption:!1,orientation:"l",roundingFunction:function(a,c){if(null===a)return null;if("number"!=typeof c.step)return a;var d=a%(60*c.step);return d>=30*c.step?a+=60*c.step-d:a-=d,a==b&&c.show2400?a:a%b},scrollDefault:null,selectOnBlur:!1,show2400:!1,showDuration:!1,showOn:["click","focus"],showOnFocus:!0,step:30,stopScrollPropagation:!1,timeFormat:"g:ia",typeaheadHighlight:!0,useSelect:!1,wrapHours:!0}});