"use strict";function formBuilderHelpersFn(a,b){var c={doCancel:!1},d=fbUtils;return b.events=formBuilderEventsFn(),c.makeClassName=function(a){return a=a.replace(/[^\w\s\-]/gi,""),d.hyphenCase(a)},c.mobileClass=function(){var a="";return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=" fb-mobile")}(navigator.userAgent||navigator.vendor||window.opera),a},c.startMoving=function(a,b){b.item.show().addClass("moving"),c.startIndex=$("li",this).index(b.item)},c.stopMoving=function(a,b){b.item.removeClass("moving"),c.doCancel&&($(b.sender).sortable("cancel"),$(this).sortable("cancel")),c.save(),c.doCancel=!1},c.beforeStop=function(b,d){var e=document.getElementById(a.formID),f=e.children.length-1,g=[];c.stopIndex=d.placeholder.index()-1,!a.sortableControls&&d.item.parent().hasClass("frmb-control")&&g.push(!0),a.prepend&&g.push(0===c.stopIndex),a.append&&g.push(c.stopIndex+1===f),c.doCancel=g.some(function(a){return a===!0})},c.safename=function(a){return a.replace(/\s/g,"-").replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()},c.forceNumber=function(a){return a.replace(/[^0-9]/g,"")},c.initTooltip=function(a){var b=a.find(".tooltip");a.mouseenter(function(){b.outerWidth()>200&&b.addClass("max-width"),b.css("left",a.width()+14),b.stop(!0,!0).fadeIn("fast")}).mouseleave(function(){a.find(".tooltip").stop(!0,!0).fadeOut("fast")}),b.hide()},c.getTypes=function(a){var b={type:a.attr("type")},c=$(".fld-subtype",a).val();return c!==b.type&&(b.subtype=c),b},c.fieldOptionData=function(a){var b=[];return $(".sortable-options li",a).each(function(){var a=$(this),c=$(".option-selected",a).is(":checked"),d={label:$(".option-label",a).val(),value:$(".option-value",a).val()};c&&(d.selected=c),b.push(d)}),b},c.xmlSave=function(a){var b=c.prepData(a),e=["<form-template>\n\t<fields>"];return d.forEach(b,function(a,b){var c=null;if(b.type.match(/(select|checkbox-group|radio-group)/)){for(var f=b.values,g=[],h=0;h<f.length;h++){var i=d.markup("option",f[h].label,f[h]).outerHTML;g.push("\n\t\t\t"+i)}g.push("\n\t\t"),c=g.join(""),delete b.values}var j=d.markup("field",c,b);e.push("\n\t\t"+j.outerHTML)}),e.push("\n\t</fields>\n</form-template>"),e.join("")},c.prepData=function(a){var b=[];return 0!==a.childNodes.length&&d.forEach(a.childNodes,function(a,e){var f=$(e);if(!f.hasClass("disabled")){var g,h;!function(){var a=c.getTypes(f),i=$(".roles-field:checked",e).map(function(){return this.value}).get();$('[class*="fld-"]',e).each(function(){var b=d.camelCase(this.name);a[b]="checkbox"===this.type?this.checked:this.value}),i.length&&(a.role=i.join(",")),a.className=a.className||a.class,g=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(a.className),g&&(a.style=g[1]),a=d.trimObj(a),a=d.escapeAttrs(a),h=a.type.match(/(select|checkbox-group|radio-group)/),h&&(a.values=c.fieldOptionData(f)),b.push(a)}()}}),b},c.jsonSave=function(a){return window.JSON.stringify(c.prepData(a),null,"\t")},c.getData=function(c){var e=c||a.formData;if(!e)return!1;var f={xml:function(a){return d.parseXML(a)},json:function(a){return window.JSON.parse(a)}};return b.formData=f[a.dataType](e)||[],b.formData},c.save=function(){var d=document.getElementById(a.formID),e={xml:c.xmlSave,json:c.jsonSave};return b.formData=e[a.dataType](d),document.dispatchEvent(b.events.formSaved),b.formData},c.incrementId=function(a){var b=a.lastIndexOf("-"),c=parseInt(a.substring(b+1))+1,d=a.substring(0,b);return d+"-"+c},c.updatePreview=function(b){var e=b.attr("class");if(e.indexOf("ui-sortable-handle")===-1){var f,g=$(b).attr("type"),h=$(".prev-holder",b),i={type:g};$('[class*="fld-"]',b).each(function(){var a=d.camelCase(this.name);i[a]="checkbox"===this.type?this.checked:this.value});var j=$(".btn-style",b).val();j&&(i.style=j),g.match(/(select|checkbox-group|radio-group)/)&&(i.values=[],i.multiple=$('[name="multiple"]',b).is(":checked"),$(".sortable-options li",b).each(function(){var a={};a.selected=$(".option-selected",this).is(":checked"),a.value=$(".option-value",this).val(),a.label=$(".option-label",this).val(),i.values.push(a)})),i=d.trimObj(i),i.className=c.classNames(b,i),$(".fld-className",b).val(i.className),b.data("fieldData",i),f=d.fieldRender(i,a,!0),h.html(f),$("input[toggle]",h).kcToggle()}},c.debounce=function(a){var b,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var e=this,f=arguments,g=function(){b=null,d||a.apply(e,f)},h=d&&!b;clearTimeout(b),b=setTimeout(g,c),h&&a.apply(e,f)}},c.disabledTT={className:"frmb-tt",add:function(b){var e=a.messages.fieldNonEditable;if(e){var f=d.markup("p",e,{className:c.disabledTT.className});b.append(f)}},remove:function(a){$(".frmb-tt",a).remove()}},c.classNames=function(a,b){var c=void 0,e=b.type,f=b.style,g=a[0].querySelector(".fld-className").value,h=g.split(" "),i={button:"btn",submit:"btn"},j=i[e];if(j){if(f){for(c=0;c<h.length;c++){var k=new RegExp("(?:^|s)"+j+"-(.*?)(?:s|$)+","g"),l=h[c].match(k);l&&h.splice(c,1)}h.push(j+"-"+f)}h.push(j)}return d.unique(h).join(" ").trim()},c.closeConfirm=function(a,c){a=a||document.getElementsByClassName("form-builder-overlay")[0],c=c||document.getElementsByClassName("form-builder-dialog")[0],a.classList.remove("visible"),c.remove(),a.remove(),document.dispatchEvent(b.events.modalClosed)},c.editorLayout=function(a){var b={left:{stage:"pull-right",controls:"pull-left"},right:{stage:"pull-left",controls:"pull-right"}};return b[a]?b[a]:""},c.showOverlay=function(){var a=d.markup("div",null,{className:"form-builder-overlay"});return document.body.appendChild(a),a.classList.add("visible"),a.onclick=function(){c.closeConfirm(a)},a},c.confirm=function(b,e){var f=arguments.length>2&&void 0!==arguments[2]&&arguments[2],g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",h=c.showOverlay(),i=d.markup("button",a.messages.yes,{className:"yes btn btn-success btn-sm"}),j=d.markup("button",a.messages.no,{className:"no btn btn-danger btn-sm"});j.onclick=function(){c.closeConfirm(h)},i.onclick=function(){e(),c.closeConfirm(h)};var k=d.markup("div",[j,i],{className:"button-wrap"});g="form-builder-dialog "+g;var l=d.markup("div",[b,k],{className:g});return f?l.classList.add("positioned"):(f={pageX:Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2,pageY:Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2},l.style.position="fixed"),l.style.left=f.pageX+"px",l.style.top=f.pageY+"px",document.body.appendChild(l),i.focus(),l},c.dialog=function(a){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";c.showOverlay(),f="form-builder-dialog "+f;var g=d.markup("div",a,{className:f});return e?g.classList.add("positioned"):(e={pageX:Math.max(document.documentElement.clientWidth,window.innerWidth||0)/2,pageY:Math.max(document.documentElement.clientHeight,window.innerHeight||0)/2},g.style.position="fixed"),g.style.left=e.pageX+"px",g.style.top=e.pageY+"px",document.body.appendChild(g),document.dispatchEvent(b.events.modalOpened),f.indexOf("data-dialog")!==-1&&document.dispatchEvent(b.events.viewData),g},c.removeAllfields=function(){var b=document.getElementById(a.formID),d=b.querySelectorAll("li.form-field"),e=$(d),f=[];if(!d.length)return!1;a.prepend&&f.push(!0),a.append&&f.push(!0),f.some(function(a){return a===!0})||(b.parentElement.classList.add("empty"),b.parentElement.dataset.content=a.messages.getStarted),b.classList.add("removing");var g=0;e.each(function(){g+=$(this).outerHeight()+3}),d[0].style.marginTop=-g+"px",setTimeout(function(){e.remove(),document.getElementById(a.formID).classList.remove("removing"),c.save()},400)},c.setFieldOrder=function(b){if(!a.sortableControls)return!1;var c={};b.children().each(function(a,b){c[a]=$(b).data("attrs").type}),window.sessionStorage&&window.sessionStorage.setItem("fieldOrder",window.JSON.stringify(c))},c.orderFields=function(b){var c=!1;if(window.sessionStorage&&(a.sortableControls?c=window.sessionStorage.getItem("fieldOrder"):window.sessionStorage.removeItem("fieldOrder")),c)c=window.JSON.parse(c),c=Object.keys(c).map(function(a){return c[a]});else{var e=a.controlOrder.concat(b.map(function(a){return a.attrs.type}));c=d.unique(e)}var f=[];return c.forEach(function(a){var c=b.filter(function(b){return b.attrs.type===a})[0];f.push(c)}),f.filter(Boolean)},c.closeAllEdit=function(a){var b=$("> li.editing",a),c=$(".toggle-form",a),d=$(".frm-holder",b);c.removeClass("open"),b.removeClass("editing"),d.hide(),$(".prev-holder",b).show()},c.toggleEdit=function(a){var b=document.getElementById(a),c=$(".toggle-form",b),d=$(".frm-holder",b);b.classList.toggle("editing"),c.toggleClass("open"),$(".prev-holder",b).slideToggle(250),d.slideToggle(250)},c.stickyControls=function(a,b){var c=$(b).parent(),d=a.parent(),e=c.width(),f=b.getBoundingClientRect();$(window).scroll(function(){var a=$(this).scrollTop();if(a>d.offset().top){var g={position:"fixed",width:e,top:0,bottom:"auto",right:"auto",left:f.left},h=c.offset(),i=d.offset(),j=h.top+c.height(),k=i.top+d.height();j>k&&h.top!==i.top&&c.css({position:"absolute",top:"auto",bottom:0,right:0,left:"auto"}),(j<k||j===k&&h.top>a)&&c.css(g)}else b.parentElement.removeAttribute("style")})},c.showData=function(){var e=d.escapeHtml(b.formData),f=d.markup("code",e,{className:"formData-"+a.dataType}),g=d.markup("pre",f);c.dialog(g,null,"data-dialog")},c.removeField=function(d){var e=!1,f=document.getElementById(a.formID),g=f.getElementsByClassName("form-field");if(!g.length)return console.warn("No fields to remove"),!1;if(!d){var h=[].slice.call(g).map(function(a){return a.id});console.warn("fieldID required to use `removeField` action."),console.warn("Available IDs: "+h.join(", "))}var i=document.getElementById(d),j=$(i);return i?(j.slideUp(250,function(){if(j.removeClass("deleting"),j.remove(),e=!0,c.save(),!f.childNodes.length){var b=f.parentElement;b.classList.add("empty"),b.dataset.content=a.messages.getStarted}}),document.dispatchEvent(b.events.fieldRemoved),e):(console.warn("Field not found"),!1)},c}function formBuilderEventsFn(){var a={};return a.loaded=new Event("loaded"),a.viewData=new Event("viewData"),a.userDeclined=new Event("userDeclined"),a.modalClosed=new Event("modalClosed"),a.modalOpened=new Event("modalOpened"),a.formSaved=new Event("formSaved"),a.fieldAdded=new Event("fieldAdded"),a.fieldRemoved=new Event("fieldRemoved"),a}"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof Event&&!function(){window.Event=function(a){var b=document.createEvent("Event");return b.initEvent(a,!0,!0),b}}(),"function"!=typeof Object.assign&&(Object.assign=function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");a=Object(a);for(var b=1;b<arguments.length;b++){var c=arguments[b];if(null!=c)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},fbUtils={};fbUtils.inArray=function(a,b){return b.indexOf(a)!==-1},fbUtils.trimObj=function(a){var b=[null,void 0,"",!1,"false"];for(var c in a)fbUtils.inArray(a[c],b)?delete a[c]:Array.isArray(a[c])&&(a[c].length||delete a[c]);return a},fbUtils.validAttr=function(a){var b=["values","enableOther","other","label","subtype"];return!fbUtils.inArray(a,b)},fbUtils.attrString=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&fbUtils.validAttr(c)&&(c=fbUtils.safeAttr(c,a[c]),b.push(c.name+c.value));return b.join(" ")},fbUtils.safeAttr=function(a,b){a=fbUtils.safeAttrName(a);var c=void 0;return b&&(Array.isArray(b)?c=fbUtils.escapeAttr(b.join(" ")):("boolean"==typeof b&&(b=b.toString()),c=fbUtils.escapeAttr(b.replace(","," ").trim()))),b=b?'="'+c+'"':"",{name:a,value:b}},fbUtils.safeAttrName=function(a){var b={className:"class"};return b[a]||fbUtils.hyphenCase(a)},fbUtils.hyphenCase=function(a){return a=a.replace(/[^\w\s\-]/gi,""),a=a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}),a.replace(/\s/g,"-").replace(/^-+/g,"")},fbUtils.camelCase=function(a){return a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()})},fbUtils.markup=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=void 0,e=document.createElement(a),f=function(a){return Array.isArray(a)?"array":"undefined"==typeof a?"undefined":_typeof(a)},g={string:function(a){e.innerHTML=a},object:function(a){return e.appendChild(a)},array:function(a){for(var b=0;b<a.length;b++)d=f(a[b]),g[d](a[b])}};for(var h in c)if(c.hasOwnProperty(h)){var i=fbUtils.safeAttrName(h);e.setAttribute(i,c[h])}return d=f(b),b&&g[d].call(this,b),e},fbUtils.parseAttrs=function(a){var b=a.attributes,c={};return fbUtils.forEach(b,function(a){var d=b[a].value;d.match(/false|true/g)?d="true"===d:d.match(/undefined/g)&&(d=void 0),d&&(c[b[a].name]=d)}),c},fbUtils.parseOptions=function(a){var b=a.getElementsByTagName("option"),c={},d=[];if(b.length)for(var e=0;e<b.length;e++)c=fbUtils.parseAttrs(b[e]),c.label=b[e].textContent,d.push(c);return d},fbUtils.parseXML=function(a){var b=new window.DOMParser,c=b.parseFromString(a,"text/xml"),d=[];if(c)for(var e=c.getElementsByTagName("field"),f=0;f<e.length;f++){var g=fbUtils.parseAttrs(e[f]);e[f].children.length&&(g.values=fbUtils.parseOptions(e[f])),d.push(g)}return d},fbUtils.escapeHtml=function(a){var b=document.createElement("textarea");return b.textContent=a,b.innerHTML},fbUtils.escapeAttr=function(a){function b(a){return c[a]||a}var c={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"};return"string"==typeof a?a.replace(/["&<>]/g,b):a},fbUtils.escapeAttrs=function(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=fbUtils.escapeAttr(a[b]));return a},fbUtils.forEach=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])},fbUtils.unique=function(a){return a.filter(function(a,b,c){return c.indexOf(a)===b})},fbUtils.fieldRender=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d="",e="",f="",g=a.label||"",h=a.description||"",i="",j=a.values;a.name=c?a.name+"-preview":a.name,a.id=a.name,a.name=a.multiple?a.name+"[]":a.name,a.type=a.subtype||a.type,a.required&&(a.required=null,a["aria-required"]="true",i='<span class="required">*</span>'),"hidden"!==a.type&&(h&&(h='<span class="tooltip-element" tooltip="'+h+'">?</span>'),e='<label for="'+a.id+'" class="fb-'+a.type+'-label">'+g+" "+i+" "+h+"</label>");var k=a.label;delete a.label,delete a.description;var l=fbUtils.attrString(a);switch(a.type){case"textarea":case"rich-text":delete a.type;var m=a.value||"";d=e+"<textarea "+l+">"+m+"</textarea>";break;case"select":var n;if(a.type=a.type.replace("-group",""),j){a.placeholder&&(f+="<option disabled selected>"+a.placeholder+"</option>");for(var o=0;o<j.length;o++)j[o].selected&&!a.placeholder||delete j[o].selected,j[o].label||(j[o].label=""),n=fbUtils.attrString(j[o]),f+="<option "+n+">"+j[o].label+"</option>"}d=e+"<select "+l+">"+f+"</select>";break;case"checkbox-group":case"radio-group":var p=void 0;if(a.type=a.type.replace("-group",""),"checkbox"===a.type&&(a.name=a.name+"[]"),j){for(var q=void 0,r=0;r<j.length;r++)p=Object.assign({value:"",label:""},a,j[r]),p.selected&&(delete p.selected,p.checked=null),p.id=a.id+"-"+r,q=fbUtils.attrString(p),f+="<input "+q+' /> <label for="'+p.id+'">'+p.label+"</label><br>";if(a.other){var s={id:a.id+"-other",className:a.className+" other-option",onclick:"fbUtils.otherOptionCB('"+a.id+"-other')"};q=fbUtils.attrString(Object.assign({},a,s)),f+="<input "+q+' /> <label for="'+s.id+'">'+b.messages.other+'</label> <input type="text" name="'+a.name+'" id="'+s.id+'-value" style="display:none;" />'}}d=e+'<div class="'+a.type+'-group">'+f+"</div>";break;case"text":case"password":case"email":case"number":case"file":case"hidden":case"date":case"tel":case"autocomplete":d=e+" <input "+l+">";break;case"color":d=e+" <input "+l+"> "+b.messages.selectColor;break;case"button":case"submit":d="<button "+l+">"+k+"</button>";break;case"checkbox":d="<input "+l+"> "+e,a.toggle&&setTimeout(function(){$(document.getElementById(a.id)).kcToggle()},100);break;default:d="<"+a.type+" "+l+">"+k+"</"+a.type+">"}if("hidden"!==a.type){var t=a.id?"fb-"+a.type+" form-group field-"+a.id:"";d=fbUtils.markup("div",d,{className:t})}else d=fbUtils.markup("input",null,a);return d},fbUtils.otherOptionCB=function(a){var b=document.getElementById(a),c=document.getElementById(a+"-value");b.checked?(b.style.display="none",c.style.display="inline-block"):(b.style.display="inline-block",c.style.display="none")},fbUtils.capitalize=function(a){return a.replace(/\b\w/g,function(a){return a.toUpperCase()})},function(a){var b=function(b,c){var d={theme:"fresh",messages:{off:"Off",on:"On"}},e=a.extend(d,c),f=a('<div class="kc-toggle"/>').insertAfter(b).append(b);f.toggleClass("on",b.is(":checked"));var g='<div class="kct-on">'+e.messages.on+"</div>",h='<div class="kct-off">'+e.messages.off+"</div>",i='<div class="kct-handle"></div>',j='<div class="kct-inner">'+g+i+h+"</div>";f.append(j),f.click(function(){b.attr("checked",!b.attr("checked")),a(this).toggleClass("on")})};a.fn.kcToggle=function(c){var d=this;return d.each(function(){var d=a(this);if(!d.data("kcToggle")){var e=new b(d,c);d.data("kcToggle",e)}})}}(jQuery),function(a){var b=function(b,c){function d(a,b){var c=[];for(var d in a)if(a.hasOwnProperty(d)){var g=j.messages[d],h=a[d].value;a[d].value=b[d]||a[d].value||"",a[d].label&&(j.messages[d]=a[d].label),a[d].options?c.push(f(d,a[d])):c.push(e(d,a[d])),j.messages[d]=g,a[d].value=h}return c.join("")}function e(a,b){var c={id:a+"-"+n,title:b.description||b.label||a.toUpperCase(),name:a,type:b.type||"text",className:["fld-"+a]},d='<label for="'+c.id+'">'+j.messages[a]+"</label>";i.inArray(c.type,["checkbox","checkbox-group","radio-group"])||c.className.push("form-control"),c=Object.assign({},b,c);var e="<input "+i.attrString(c)+">",f='<div class="input-wrap">'+e+"</div>";return'<div class="form-group '+a+'-wrap">'+d+f+"</div>"}function f(a,b){var c=Object.keys(b.options).map(function(a){var c={value:a};return a===b.value&&(c.selected=null),"<option "+i.attrString(c)+">"+b.options[a]+"</option>"}),d={id:a+"-"+n,title:b.description||b.label||a.toUpperCase(),name:a,className:"fld-"+a+" form-control"},e='<label for="'+d.id+'">'+j.messages[a]+"</label>";Object.keys(b).filter(function(a){return!i.inArray(a,["value","options","label"])}).forEach(function(a){d[a]=b[a]});var f="<select "+i.attrString(d)+">"+c.join("")+"</select>",g='<div class="input-wrap">'+f+"</div>";return'<div class="form-group '+a+'-wrap">'+e+g+"</div>"}var g=this,h={controlPosition:"right",controlOrder:["autocomplete","button","checkbox","checkbox-group","date","file","header","hidden","paragraph","number","radio-group","select","text","textarea"],dataType:"xml",disableFields:[],editOnAdd:!1,append:!1,prepend:!1,defaultFields:[],inputSets:[],fieldRemoveWarn:!1,roles:{1:"Administrator"},messages:{addOption:"Add Option +",allFieldsRemoved:"All fields were removed.",allowSelect:"Allow Select",allowMultipleFiles:"Allow users to upload multiple files",autocomplete:"Autocomplete",button:"Button",cannotBeEmpty:"This field cannot be empty",checkboxGroup:"Checkbox Group",checkbox:"Checkbox",checkboxes:"Checkboxes",className:"Class",clearAllMessage:"Are you sure you want to clear all fields?",clearAll:"Clear",close:"Close",content:"Content",copy:"Copy To Clipboard",copyButton:"&#43;",copyButtonTooltip:"Copy",dateField:"Date Field",description:"Help Text",descriptionField:"Description",devMode:"Developer Mode",editNames:"Edit Names",editorTitle:"Form Elements",editXML:"Edit XML",enableOther:"Enable &quot;Other&quot;",enableOtherMsg:"Let users to enter an unlisted option",fieldDeleteWarning:!1,fieldVars:"Field Variables",fieldNonEditable:"This field cannot be edited.",fieldRemoveWarning:"Are you sure you want to remove this field?",fileUpload:"File Upload",formUpdated:"Form Updated",getStarted:"Drag a field from the right to this area",header:"Header",hide:"Edit",hidden:"Hidden Input",label:"Label",labelEmpty:"Field Label cannot be empty",limitRole:"Limit access to one or more of the following roles:",mandatory:"Mandatory",maxlength:"Max Length",minOptionMessage:"This field requires a minimum of 2 options",multipleFiles:"Multiple Files",name:"Name",no:"No",number:"Number",off:"Off",on:"On",option:"Option",optional:"optional",optionLabelPlaceholder:"Label",optionValuePlaceholder:"Value",optionEmpty:"Option value required",other:"Other",paragraph:"Paragraph",placeholder:"Placeholder",placeholders:{value:"Value",label:"Label",text:"",textarea:"",email:"Enter you email",placeholder:"",className:"space separated classes",password:"Enter your password"},preview:"Preview",radioGroup:"Radio Group",radio:"Radio",removeMessage:"Remove Element",removeOption:"Remove Option",remove:"&#215;",required:"Required",richText:"Rich Text Editor",roles:"Access",save:"Save",selectOptions:"Options",select:"Select",selectColor:"Select Color",selectionsMessage:"Allow Multiple Selections",size:"Size",sizes:{xs:"Extra Small",sm:"Small",m:"Default",lg:"Large"},style:"Style",styles:{btn:{default:"Default",danger:"Danger",info:"Info",primary:"Primary",success:"Success",warning:"Warning"}},subtype:"Type",text:"Text Field",textArea:"Text Area",toggle:"Toggle",warning:"Warning!",value:"Value",viewJSON:"{  }",viewXML:"&lt;/&gt;",yes:"Yes"},notify:{error:function(a){return console.error(a)},success:function(a){return console.log(a)},warning:function(a){return console.warn(a)}},sortableControls:!1,stickyControls:!1,showActionButtons:!0,typeUserAttrs:{},typeUserEvents:{},prefix:"form-builder-"},i=fbUtils;h.messages.subtypes=function(){var a=function(a){return{label:a,value:a}};return{text:["text","password","email","color","tel"].map(a),header:["h1","h2","h3"].map(a),button:["button","submit","reset"].map(a),paragraph:["p","address","blockquote","canvas","output"].map(a)}}();var j=Object.assign({},h,b),k="frmb-"+a("ul[id^=frmb-]").length++;b.messages&&(j.messages=Object.assign({},h.messages,b.messages)),j.formID=k,g.element=c;var l=a("<ul/>").attr("id",k).addClass("frmb"),m=formBuilderHelpersFn(j,g);g.layout=m.editorLayout(j.controlPosition);var n=k+"-fld-1",o=k+"-control-box",p=[{label:j.messages.autocomplete,attrs:{type:"autocomplete",className:"autocomplete",name:"autocomplete"}},{label:j.messages.button,attrs:{type:"button",className:"button-input",name:"button"}},{label:j.messages.checkbox,attrs:{type:"checkbox",className:"checkbox",name:"checkbox"}},{label:j.messages.checkboxGroup,attrs:{type:"checkbox-group",className:"checkbox-group",name:"checkbox-group"}},{label:j.messages.dateField,attrs:{type:"date",className:"calendar",name:"date-input"}},{label:j.messages.fileUpload,attrs:{type:"file",className:"file-input",name:"file-input"}},{label:j.messages.header,attrs:{type:"header",className:"header"}},{label:j.messages.hidden,attrs:{type:"hidden",className:"hidden-input",name:"hidden-input"}},{label:j.messages.number,attrs:{type:"number",className:"number",name:"number"}},{label:j.messages.paragraph,attrs:{type:"paragraph",className:"paragraph"}},{label:j.messages.radioGroup,attrs:{type:"radio-group",className:"radio-group",name:"radio-group"}},{label:j.messages.select,attrs:{type:"select",className:"select",name:"select"}},{label:j.messages.text,attrs:{type:"text",className:"text-input",name:"text-input"}},{label:j.messages.textArea,attrs:{type:"textarea",className:"text-area",name:"textarea"}}];p=m.orderFields(p),j.disableFields&&(p=p.filter(function(a){return!i.inArray(a.attrs.type,j.disableFields)}));var q=i.markup("ul",null,{id:o,className:"frmb-control"});j.sortableControls&&q.classList.add("sort-enabled");var r=a(q);i.forEach(p,function(b){var c=a("<li/>",{class:"icon-"+p[b].attrs.className,type:p[b].type,name:p[b].className,label:p[b].label});c.data("newFieldData",p[b]);var d=i.markup("span",p[b].label);c.html(d).appendTo(r)}),j.inputSets.length&&(a("<li/>",{class:"fb-separator"}).html("<hr>").appendTo(r),j.inputSets.forEach(function(b){b.name=b.name||m.makeClassName(b.label);var c=a("<li/>",{class:"input-set-control",type:b.name});c.html(b.label).appendTo(r)})),l.sortable({cursor:"move",opacity:.9,revert:150,beforeStop:m.beforeStop,start:m.startMoving,stop:m.stopMoving,cancel:"input, select, .disabled, .form-group, .btn",placeholder:"frmb-placeholder"}),r.sortable({helper:"clone",opacity:.9,connectWith:l,cancel:".fb-separator",cursor:"move",scroll:!1,placeholder:"ui-state-highlight",start:m.startMoving,stop:m.stopMoving,revert:150,beforeStop:m.beforeStop,distance:3,update:function(a,b){return!m.doCancel&&void(b.item.parent()[0]===l[0]?(s(b.item),m.doCancel=!0):(m.setFieldOrder(r),m.doCancel=!j.sortableControls))}});var s=function(a){if(a[0].classList.contains("input-set-control")){var b=j.inputSets.filter(function(b){return b.name===a[0].type})[0];if(b.showHeader){var c={type:"header",subtype:"h2",id:b.name,label:b.label};D(c,!0)}b.fields.forEach(function(a){D(a,!0)})}else D(a,!0)},t=a("<div/>",{id:k+"-form-wrap",class:"form-wrap form-builder"+m.mobileClass()}),u=a("<div/>",{id:k+"-stage-wrap",class:"stage-wrap "+g.layout.stage}),v=a("<div/>",{id:k+"-cb-wrap",class:"cb-wrap "+g.layout.controls}).append(r[0]);if(j.showActionButtons){var w="xml"===j.dataType?j.messages.viewXML:j.messages.viewJSON,x=i.markup("button",w,{id:k+"-view-data",type:"button",className:"view-data btn btn-default"}),y=i.markup("button",j.messages.clearAll,{id:k+"-clear-all",type:"button",className:"clear-all btn btn-default"}),z=i.markup("button",j.messages.save,{className:"btn btn-primary "+j.prefix+"save",id:k+"-save",type:"button"}),A=i.markup("div",[y,x,z],{className:"form-actions btn-group"});v.append(A)}u.append(l,v),u.before(t),t.append(u,v),a(c).append(t);var B=m.debounce(function(b){if(b&&"keyup"===b.type&&"className"===this.name)return!1;var c=a(this).parents(".form-field:eq(0)");m.updatePreview(c),m.save()});l.on("change blur keyup",".form-elements input, .form-elements select, .form-elements textarea",B),a("li",r).click(function(){m.stopIndex=void 0,s(a(this)),m.save()});var C=function(){var b=[];if(j.prepend&&!a(".disabled.prepend",l).length){var c=i.markup("li",j.prepend,{className:"disabled prepend"});b.push(!0),l.prepend(c)}if(j.append&&!a(".disabled.append",l).length){var d=i.markup("li",j.append,{className:"disabled append"});b.push(!0),l.append(d)}b.some(function(a){return a===!0})&&u.removeClass("empty")},D=function(b){var c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d={};if(b instanceof jQuery){var e=b.data("newFieldData");if(e)d=e.attrs,d.label=e.label;else{var f=b[0].attributes;c||(d.values=b.children().map(function(b,c){return{label:a(c).text(),value:a(c).attr("value"),selected:Boolean(a(c).attr("selected"))}}));for(var h=f.length-1;h>=0;h--)d[f[h].name]=f[h].value}}else d=Object.assign({},b);d.name=c?F(d):d.name||F(d),c&&i.inArray(d.type,["text","number","file","select","textarea"])?d.className="form-control":d.className=d.class||d.className;var j=/(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(d.className);j&&(d.style=j[1]),i.escapeAttrs(d),O(d),c&&document.dispatchEvent(g.events.fieldAdded),u.removeClass("empty")},E=function(){var b=g.formData;if(b&&b.length){for(var c=0;c<b.length;c++)D(b[c]);u.removeClass("empty")}else j.defaultFields&&j.defaultFields.length?(j.defaultFields.forEach(function(a){return D(a)}),u.removeClass("empty")):j.prepend||j.append||u.addClass("empty").attr("data-content",j.messages.getStarted);m.save(),a("li.form-field:not(.disabled)",l).each(function(){m.updatePreview(a(this))}),C()};l.on("mousemove","li.disabled",function(b){a(".frmb-tt",this).css({left:b.offsetX-16,top:b.offsetY-34})}),l.on("mouseenter","li.disabled",function(){m.disabledTT.add(a(this))}),l.on("mouseleave","li.disabled",function(){m.disabledTT.remove(a(this))});var F=function(a){var b=(new Date).getTime();return a.type+"-"+b},G=function a(b){var c=[i.markup("a",j.messages.addOption,{className:"add add-opt"})],a=['<label class="false-label">'+j.messages.selectOptions+"</label>"],d=b.multiple||"checkbox-group"===b.type;return b.values&&b.values.length?b.values.forEach(function(a){return Object.assign({},{selected:!1},a)}):(b.values=[1,2,3].map(function(a){var b=j.messages.option+" "+a,c={selected:!1,label:b,value:i.hyphenCase(b)};return c}),b.values[0].selected=!0),a.push('<div class="sortable-options-wrap">'),a.push('<ol class="sortable-options">'),i.forEach(b.values,function(c){a.push(P(b.name,b.values[c],d))}),a.push("</ol>"),a.push(i.markup("div",c,{className:"option-actions"}).outerHTML),a.push("</div>"),i.markup("div",a.join(""),{className:"form-group field-options"}).outerHTML},H=function a(b){var c,a=[],e=["select","checkbox-group","radio-group"],f=function(){return e.indexOf(b.type)!==-1}(),g=!i.inArray(b.type,["header","paragraph","file"].concat(e)),h=void 0!==b.role?b.role.split(","):[];if(a.push(N(b)),"checkbox"===b.type&&a.push(I("toggle",b,{first:j.messages.toggle})),a.push(M("label",b)),b.size=b.size||"m",b.style=b.style||"default",i.inArray(b.type,["header","paragraph","button"])||a.push(M("description",b)),j.messages.subtypes[b.type]){var k=j.messages.subtypes[b.type];a.push(L("subtype",b,k))}if("button"===b.type&&a.push(J(b.style,b.type)),"number"===b.type&&(a.push(K("min",b)),a.push(K("max",b)),a.push(K("step",b))),a.push(M("placeholder",b)),"textarea"===b.type&&a.push(K("rows",b)),a.push(M("className",b)),a.push(M("name",b)),g&&a.push(M("value",b)),"file"===b.type){var l={first:j.messages.multipleFiles,second:j.messages.allowMultipleFiles};a.push(I("multiple",b,l))}var m=void 0!==b.role?'style="display:block"':"",o=['<div class="available-roles" '+m+">"];for(c in j.roles)if(j.roles.hasOwnProperty(c)){var p=i.inArray(c,h)?"checked":"",q="fld-"+n+"-roles-"+c;o.push('<input type="checkbox" name="roles[]" value="'+c+'" id="'+q+'" '+p+' class="roles-field" /> <label for="'+q+'">'+j.roles[c]+"</label><br/>");
}o.push("</div>");var r={first:j.messages.roles,second:j.messages.limitRole,content:o.join("")};return a.push(I("access",b,r)),"checkbox-group"!==b.type&&"radio-group"!==b.type||a.push(I("other",b,{first:j.messages.enableOther,second:j.messages.enableOtherMsg})),"select"===b.type&&a.push(I("multiple",b,{first:" ",second:j.messages.selectionsMessage})),f&&a.push(G(b)),i.inArray(b.type,["text","textarea"])&&a.push(K("maxlength",b)),j.typeUserAttrs[b.type]&&a.push(d(j.typeUserAttrs[b.type],b)),a.join("")},I=function(a,b,c){if(!j.typeUserAttrs[b.type]||!j.typeUserAttrs[b.type][a]){var d=function(b){return'<label for="'+a+"-"+n+'">'+b+"</label>"},e=void 0!==b[a]?"checked":"",f='<input type="checkbox" class="fld-'+a+'" name="'+a+'" value="true" '+e+' id="'+a+"-"+n+'"/> ',g=[],h=[f];return c.first&&g.unshift(d(c.first)),c.second&&h.push(d(c.second)),c.content&&h.push(c.content),h.unshift('<div class="input-wrap">'),h.push("</div>"),'<div class="form-group '+a+'-wrap">'+g.concat(h).join("")+"</div>"}},J=function(a,b){var c={button:"btn"},d=j.messages.styles[c[b]],e="";if(d){var f="<label>"+j.messages.style+"</label>";e+='<input value="'+a+'" name="style" type="hidden" class="btn-style">',e+='<div class="btn-group" role="group">',Object.keys(j.messages.styles[c[b]]).forEach(function(d){var f=a===d?"active":"";e+='<button value="'+d+'" type="'+b+'" class="'+f+" btn-xs "+c[b]+" "+c[b]+"-"+d+'">'+j.messages.styles[c[b]][d]+"</button>"}),e+="</div>",e='<div class="form-group style-wrap">'+f+" "+e+"</div>"}return e},K=function a(b,c){if(!j.typeUserAttrs[c.type]||!j.typeUserAttrs[c.type][b]){var d=c[b],e=j.messages[b]||b,f=j.messages.placeholders[b],g={type:"number",value:d,name:b,min:"0",placeholder:f,className:"fld-"+b+" form-control",id:b+"-"+n},a="<input "+i.attrString(i.trimObj(g))+">",h='<div class="input-wrap">'+a+"</div>";return'<div class="form-group '+b+'-wrap"><label for="'+g.id+'">'+e+"</label> "+h+"</div>"}},L=function(a,b,c){if(!j.typeUserAttrs[b.type]||!j.typeUserAttrs[b.type][a]){var d=c.map(function(c,d){var e=Object.assign({label:j.messages.option+" "+d,value:void 0},c);return c.value===b[a]&&(e.selected=!0),"<option "+i.attrString(i.trimObj(e))+">"+e.label+"</option>"}),e={id:a+"-"+n,name:a,className:"fld-"+a+" form-control"},f='<label for="'+e.id+'">'+(j.messages[a]||i.capitalize(a))+"</label>",g="<select "+i.attrString(e)+">"+d.join("")+"</select>",h='<div class="input-wrap">'+g+"</div>";return'<div class="form-group '+e.name+'-wrap">'+f+h+"</div>"}},M=function(a,b){if(!j.typeUserAttrs[b.type]||!j.typeUserAttrs[b.type][a]){var c=["text","textarea","select"],d=["header"],e=["paragraph"],f=b[a]||"",g=j.messages[a];"label"===a&&i.inArray(b.type,e)&&(g=j.messages.content),d=d.concat(j.messages.subtypes.header,e);var h=j.messages.placeholders,k=h[a]||"",l="",m=[];if("placeholder"!==a||i.inArray(b.type,c)||m.push(!0),"name"===a&&i.inArray(b.type,d)&&m.push(!0),!m.some(function(a){return a===!0})){var o={name:a,placeholder:k,className:"fld-"+a+" form-control",id:a+"-"+n},p='<label for="'+o.id+'">'+g+"</label>";"label"===a&&i.inArray(b.type,e)||"value"===a&&"textarea"===b.type?l+="<textarea "+i.attrString(o)+">"+f+"</textarea>":(o.value=f,o.type="text",l+="<input "+i.attrString(o)+">");var q='<div class="input-wrap">'+l+"</div>";l='<div class="form-group '+a+'-wrap">'+p+" "+q+"</div>"}return l}},N=function(a){var b=["header","paragraph","button"],c=[],d="";return i.inArray(a.type,b)&&c.push(!0),c.some(function(a){return a===!0})||(d=I("required",a,{first:j.messages.required})),d},O=function(b){var c=b.type||"text",d=b.label||j.messages[c]||j.messages.label,e=i.markup("a",j.messages.remove,{id:"del_"+n,className:"del-button btn delete-confirm",title:j.messages.removeMessage}),f=i.markup("a",null,{id:n+"-edit",className:"toggle-form btn icon-pencil",title:j.messages.hide}),g=i.markup("a",j.messages.copyButton,{id:n+"-copy",className:"copy-button btn icon-copy",title:j.messages.copyButtonTooltip}),h=i.markup("div",[f,g,e],{className:"field-actions"}).outerHTML;h+='<label class="field-label">'+d+"</label>",b.description&&(h+='<span class="tooltip-element" tooltip="'+b.description+'">?</span>');var k=b.required?'style="display:inline"':"";h+='<span class="required-asterisk" '+k+"> *</span>",h+=i.markup("div","",{className:"prev-holder"}).outerHTML,h+='<div id="'+n+'-holder" class="frm-holder">',h+='<div class="form-elements">',h+=H(b),h+=i.markup("a",j.messages.close,{className:"close-field"}).outerHTML,h+="</div>",h+="</div>";var o=i.markup("li",h,{class:c+"-field form-field",type:c,id:n}),p=a(o);p.data("fieldData",{attrs:b}),"undefined"!=typeof m.stopIndex?a("> li",l).eq(m.stopIndex).before(p):l.append(p),a(".sortable-options",p).sortable({update:function(){m.updatePreview(p)}}),m.updatePreview(p),j.editOnAdd&&(m.closeAllEdit(l),m.toggleEdit(n)),j.typeUserEvents[c]&&j.typeUserEvents[c].onadd&&j.typeUserEvents[c].onadd(o),n=m.incrementId(n)},P=function(a,b,c){var d={selected:c?"checkbox":"radio"},e=["value","label","selected"],f=[];b=Object.assign({selected:!1,label:"",value:""},b);for(var g=e.length-1;g>=0;g--){var h=e[g];if(b.hasOwnProperty(h)){var k={type:d[h]||"text",class:"option-"+h,value:b[h],name:a+"-option"};j.messages.placeholders[h]&&(k.placeholder=j.messages.placeholders[h]),"selected"===h&&b.selected===!0&&(k.checked=b.selected),f.push(i.markup("input",null,k))}}var l={className:"remove btn",title:j.messages.removeMessage};f.push(i.markup("a",j.messages.remove,l));var m=i.markup("li",f);return m.outerHTML},Q=function(b){var c=b.attr("id"),d=b.attr("type"),e=(new Date).getTime(),f=d+"-"+e,g=b.clone();return g.find("[id]").each(function(){this.id=this.id.replace(c,n)}),g.find("[for]").each(function(){this.setAttribute("for",this.getAttribute("for").replace(c,n))}),g.each(function(){a("e:not(.form-elements)").each(function(){var a=this.getAttribute("name");a=a.substring(0,a.lastIndexOf("-")+1),a+=e.toString(),this.setAttribute("name",a)})}),g.find(".form-elements").find(":input").each(function(){if("name"===this.getAttribute("name")){var a=this.getAttribute("value");a=a.substring(0,a.lastIndexOf("-")+1),a+=e.toString(),this.setAttribute("value",a)}}),g.attr("id",n),g.attr("name",f),g.addClass("cloned"),a(".sortable-options",g).sortable(),j.typeUserEvents[d]&&j.typeUserEvents[d].onclone&&j.typeUserEvents[d].onclone(g[0]),n=m.incrementId(n),g};if(l.on("click touchstart",".remove",function(b){var c=a(this).parents(".form-field:eq(0)");b.preventDefault();var d=a(this).parents(".sortable-options:eq(0)").children("li").length;d<=2?j.notify.error("Error: "+j.messages.minOptionMessage):a(this).parent("li").slideUp("250",function(){a(this).remove(),m.updatePreview(c),m.save()})}),l.on("touchstart","input",function(b){if(b.handled===!0)return!1;if("checkbox"===a(this).attr("type"))a(this).trigger("click");else{a(this).focus();var c=a(this).val();a(this).val(c)}}),l.on("click touchstart",".toggle-form, .close-field",function(b){if(b.stopPropagation(),b.preventDefault(),b.handled===!0)return!1;var c=a(this).parents(".form-field:eq(0)").attr("id");m.toggleEdit(c),b.handled=!0}),l.on("change",".prev-holder input, .prev-holder select",function(b){if(!b.target.classList.contains("other-option")){var c=a(b.target).closest("li.form-field")[0];i.inArray(c.type,["select","checkbox-group","radio-group"])?c.querySelector('[class="option-value"][value="'+b.target.value+'"]').parentElement.childNodes[0].checked=!0:document.getElementById("value-"+c.id).value=b.target.value,m.save()}}),l.on("keyup change",'[name="label"]',function(){a(".field-label",a(this).closest("li")).text(a(this).val())}),l.delegate("input.error","keyup",function(){a(this).removeClass("error")}),l.on("keyup",'input[name="description"]',function(){var b=a(this).parents(".form-field:eq(0)"),c=a(".tooltip-element",b),d=a(this).val();if(""!==d)if(c.length)c.attr("tooltip",d).css("display","inline-block");else{var e='<span class="tooltip-element" tooltip="'+d+'">?</span>';a(".field-label",b).after(e)}else c.length&&c.css("display","none")}),l.on("change",".fld-multiple",function(b){var c=b.target.checked?"checkbox":"radio";a(b.target).parents(".form-elements:eq(0)").find(".sortable-options input.option-selected").each(function(){this.type=c})}),l.on("blur","input.fld-name",function(){this.value=m.safename(this.value),""===this.value?a(this).addClass("field-error").attr("placeholder",j.messages.cannotBeEmpty):a(this).removeClass("field-error")}),l.on("blur","input.fld-maxlength",function(){this.value=m.forceNumber(this.value)}),l.on("click touchstart",".icon-copy",function(b){b.preventDefault();var c=a(this).parent().parent("li"),d=Q(c);d.insertAfter(c),m.updatePreview(d),m.save()}),l.on("click touchstart",".delete-confirm",function(b){b.preventDefault();var c=this.getBoundingClientRect(),d=document.body.getBoundingClientRect(),e={pageX:c.left+c.width/2,pageY:c.top-d.top-12},f=a(this).parents(".form-field:eq(0)").attr("id"),g=a(document.getElementById(f));if(document.addEventListener("modalClosed",function(){g.removeClass("deleting")},!1),j.fieldRemoveWarn){var h=i.markup("h3",j.messages.warning),k=i.markup("p",j.messages.fieldRemoveWarning);m.confirm([h,k],function(){return m.removeField(f)},e),g.addClass("deleting")}else m.removeField(f)}),l.on("click",".style-wrap button",function(){var b=a(this).val(),c=a(this).parent(),d=c.prev(".btn-style");d.val(b),a(this).siblings(".btn").removeClass("active"),a(this).addClass("active"),B.call(c)}),l.on("click","input.fld-required",function(){var b=a(this).parents("li.form-field").find(".required-asterisk");b.toggle()}),l.on("click","input.fld-access",function(){var b=a(this).parents("li.form-field").find("div.available-roles"),c=a(this);b.slideToggle(250,function(){c.is(":checked")||a('input[type="checkbox"]',b).removeAttr("checked")})}),l.on("click",".add-opt",function(b){b.preventDefault();var c=a(this).parents(".field-options:eq(0)"),d=a('[name="multiple"]',c),e=a(".option-selected:eq(0)",c),f=!1;f=d.length?d.prop("checked"):"checkbox"===e.attr("type");var g=e.attr("name");a(".sortable-options",c).append(P(g,!1,f))}),l.on("mouseover mouseout",".remove, .del-button",function(){a(this).parents("li:eq(0)").toggleClass("delete")}),j.showActionButtons){var R=a(document.getElementById(k+"-view-data"));R.click(function(a){a.preventDefault(),m.showData()});var S=a(document.getElementById(k+"-clear-all"));S.click(function(){var b=a("li.form-field"),c=this.getBoundingClientRect(),d=document.body.getBoundingClientRect(),e={pageX:c.left+c.width/2,pageY:c.top-d.top-12};b.length?m.confirm(j.messages.clearAllMessage,function(){m.removeAllfields(),j.notify.success(j.messages.allFieldsRemoved),m.save()},e):m.dialog("There are no fields to clear",{pageX:e.pageX,pageY:e.pageY})}),a(document.getElementById(k+"-save")).click(function(a){a.preventDefault(),m.save()})}return m.getData(),E(),l.css("min-height",r.height()),j.stickyControls&&m.stickyControls(l,q),document.dispatchEvent(g.events.loaded),g.actions={clearFields:m.removeAllfields,showData:m.showData,save:m.save,addField:function(a,b){m.stopIndex=l[0].children.length?b:void 0,D(a),document.dispatchEvent(g.events.fieldAdded)},removeField:m.removeField,setData:function(a){m.removeAllfields(),m.getData(a),E()}},g};a.fn.formBuilder=function(c){return c=c||{},this.each(function(){var d=new b(c,this);return a(this).data("formBuilder",d),d})}}(jQuery);